Type.registerNamespace("Sys.Extended.UI.HTMLEditor.ToolbarButton");Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton=function(b){var a=this;Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton.initializeBase(a,[b]);a._loaded=false;a._preservePlace=false;a._editPanel=null;a._activeModes=null;a._app_onload$delegate=Function.createDelegate(a,a._app_onload);a._cssClass="";a._onmouseover$delegate=Function.createDelegate(a,a._onmouseover);a._onmouseout$delegate=Function.createDelegate(a,a._onmouseout);a._onmousedown$delegate=Function.createDelegate(a,a._onmousedown);a._onmouseup$delegate=Function.createDelegate(a,a._onmouseup);a._onclick$delegate=Function.createDelegate(a,a._onclick)};Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton.prototype={get_preservePlace:function(){return this._preservePlace},set_preservePlace:function(a){this._preservePlace=a},set_activeEditPanel:function(b){var a=this;a._editPanel=b;if(a._editPanel==null)a.hideButton();else if(a.isAllowedActiveMode(a._editPanel.get_activeMode())&&a.canBeShown()){a.showButton();a.onEditPanelActivity()}else a.hideButton()},isImage:function(){return true},checkRangeInDesign:function(){var a=this;if(typeof a._designPanel=="undefined")return false;if(a._designPanel==null)return false;if(a._designPanel.isPopup())return false;var b=Sys.Extended.UI.HTMLEditor.getSelParent(a._designPanel);if(b.nodeType==3)b=b.parentNode;return b.ownerDocument==a._designPanel._doc},get_buttonName:function(){var a=Object.getType(this).getName();a=a.substring(a.lastIndexOf(".")+1);return a},get_message:function(a){var b="Sys.Extended.UI.Resources.HTMLEditor_toolbar_button_"+this.get_buttonName()+"_message_"+a;return eval(b)},isDisplayed:function(){var a=this.get_element();if(a){var b=a.style;return b.display!="none"&&b.visibility!="hidden"}else return false},hideButton:function(){var a=this.get_element();if(a)if(!this._preservePlace)a.style.display="none";else a.style.visibility="hidden"},showButton:function(){var a=this.get_element();if(a){if(a.style.display=="none")a.style.display="";if(this._preservePlace)a.style.visibility="visible"}},canBeShown:function(){return true},onEditPanelActivity:function(){},get_activeModes:function(){if(this._activeModes==null)this._activeModes=[];return this._activeModes},set_activeModes:function(a){this.get_activeModes().push(a)},get_activeModesIds:function(){},set_activeModesIds:function(c){for(var b=c.split(";"),a=0;a<b.length;a++)this.set_activeModes(parseInt(b[a]))},set_toolTip:function(a){this.get_element().title=a},get_toolTip:function(){return this.get_element().title},isAllowedActiveMode:function(b){for(var a=0;a<this.get_activeModes().length;a++)if(this.get_activeModes()[a]==b)return true;return false},initialize:function(){var c="none",a=this;Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton.callBaseMethod(a,"initialize");Sys.Application.add_load(a._app_onload$delegate);var b=a.get_element();if(a._preservePlace&&!a.canBeShown())b.style.display=c;a._cssClass=b.className;a.isImage()&&$addHandlers(b,{mouseover:a._onmouseover$delegate,mouseout:a._onmouseout$delegate,mousedown:a._onmousedown$delegate,mouseup:a._onmouseup$delegate,click:a._onclick$delegate});if(Sys.Extended.UI.HTMLEditor.isIE){function d(a){if(a.nodeType==1&&a.tagName){var b=a.tagName.toUpperCase();if(b!="INPUT"&&b!="TEXTAREA"&&b!="IFRAME")a.unselectable="on";for(var c=0;c<a.childNodes.length;c++)d(a.childNodes.item(c))}}d(b)}else try{b.style.MozUserSelect=c;b.parentNode.style.MozUserSelect=c}catch(e){}},dispose:function(){var a=this;a.isImage()&&$common.removeHandlers(a.get_element(),{mouseover:a._onmouseover$delegate,mouseout:a._onmouseout$delegate,mousedown:a._onmousedown$delegate,mouseup:a._onmouseup$delegate,click:a._onclick$delegate});a._loaded=false;Sys.Application.remove_load(a._app_onload$delegate);Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton.callBaseMethod(a,"dispose")},_app_onload:function(){this.onButtonLoaded();this._loaded=true},onButtonLoaded:function(){},_onmouseover:function(){if(!this.isEnable())return false;Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_hover");return true},_onmouseout:function(){var a=this;if(!a.isEnable())return false;Sys.UI.DomElement.removeCssClass(a.get_element(),a._cssClass+"_hover");Sys.UI.DomElement.removeCssClass(a.get_element(),a._cssClass+"_mousedown");return true},_onmousedown:function(){if(!this.isEnable())return null;Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_mousedown");return false},_onmouseup:function(){if(!this.isEnable())return false;Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_mousedown");return true},_onclick:function(){return!this.isEnable()?false:true},isEnable:function(){return!this._loaded?false:this._editPanel==null?false:true},setActivity:function(b){var a=this;if(b)Sys.UI.DomElement.addCssClass(a.get_element(),a._cssClass+"_active");else Sys.UI.DomElement.removeCssClass(a.get_element(),a._cssClass+"_active")}};Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton.registerClass("Sys.Extended.UI.HTMLEditor.ToolbarButton.CommonButton",Sys.UI.Control);