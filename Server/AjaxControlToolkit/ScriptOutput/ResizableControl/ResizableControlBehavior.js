// (c) 2010 CodePlex Foundation
(function(){var b="ExtendedResizable";function a(){var f="resizebegin",e="resize",m="Function",l="value",d="resizing",k="selectstart",j="mouseup",i="mousemove",c="mousedown",o="mouseout",n="mouseover",h="height",g="width",b="px",a=null;Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.ResizableControlBehavior=function(c){var b=this;Sys.Extended.UI.ResizableControlBehavior.initializeBase(b,[c]);b._HandleCssClass="";b._ResizableCssClass="";b._HandleOffsetX=0;b._HandleOffsetY=0;b._MinimumWidth=0;b._MinimumHeight=0;b._MaximumWidth=1e5;b._MaximumHeight=1e5;b._frame=a;b._handle=a;b._handleHolder=a;b._lining=a;b._tracking=false;b._lastClientX=0;b._lastClientY=0;b._onmouseoverDelegate=a;b._onmouseoutDelegate=a;b._onmousedownDelegate=a;b._onmousemoveDelegate=a;b._onmouseupDelegate=a;b._onselectstartDelegate=a};Sys.Extended.UI.ResizableControlBehavior.prototype={initialize:function(){var d="absolute",a=this;Sys.Extended.UI.ResizableControlBehavior.callBaseMethod(a,"initialize");a._frame=a.get_element();var e=Sys.Extended.UI.ResizableControlBehavior.callBaseMethod(a,"get_ClientState");if(e&&-1!=e.indexOf(",")){var f=e.split(",");a._frame.style.width=f[0]+b;a._frame.style.height=f[1]+b}a._lining=document.createElement("DIV");a._lining.style.width=$common.getCurrentStyle(a._frame,g);a._lining.style.height=$common.getCurrentStyle(a._frame,h);a._lining.style.position=d;a._lining.style.backgroundColor="black";a._lining.style.opacity="0";a._lining.style.filter="progid:DXImageTransform.Microsoft.Alpha(opacity=0)";a._lining.style.visibility="hidden";a._frame.insertBefore(a._lining,a._frame.firstChild);a._handleHolder=document.createElement("DIV");a._handleHolder.style.width="0px";a._handleHolder.style.height="0px";a._handleHolder.style.position=Sys.Browser.agent===Sys.Browser.Opera?"relative":d;a._frame.insertBefore(a._handleHolder,a._frame.firstChild);a._handle=document.createElement("DIV");a._handle.className=a._HandleCssClass;a._handle.style.position=d;a._handleHolder.appendChild(a._handle);a._onmouseoverDelegate=Function.createDelegate(a,a._onmouseover);$addHandler(a._handle,n,a._onmouseoverDelegate);a._onmouseoutDelegate=Function.createDelegate(a,a._onmouseout);$addHandler(a._handle,o,a._onmouseoutDelegate);a._onmousedownDelegate=Function.createDelegate(a,a._onmousedown);$addHandler(a._handle,c,a._onmousedownDelegate);a._onmousemoveDelegate=Function.createDelegate(a,a._onmousemove);a._onmouseupDelegate=Function.createDelegate(a,a._onmouseup);a._onselectstartDelegate=Function.createDelegate(a,a._onselectstart);a._resizeControl(0,0,0,0);a._rememberSize()},dispose:function(){var b=this;if(b._onmouseoverDelegate){$removeHandler(b._handle,n,b._onmouseoverDelegate);b._onmouseoverDelegate=a}if(b._onmouseoutDelegate){$removeHandler(b._handle,o,b._onmouseoutDelegate);b._onmouseoutDelegate=a}if(b._onmousedownDelegate){$removeHandler(b._handle,c,b._onmousedownDelegate);b._onmousedownDelegate=a}if(b._onmousemoveDelegate){b.tracking&&$removeHandler(document,i,b._onmousemoveDelegate);b._onmousemoveDelegate=a}if(b._onmouseupDelegate){b.tracking&&$removeHandler(document,j,b._onmouseupDelegate);b._onmouseupDelegate=a}if(b._onselectstartDelegate){if(b.tracking){$removeHandler(document,k,b._onselectstartDelegate);Sys.Browser.agent===Sys.Browser.Opera&&$removeHandler(document,c,b._onselectstartDelegate)}b._onselectstartDelegate=a}Sys.Extended.UI.ResizableControlBehavior.callBaseMethod(b,"dispose")},_onmouseover:function(){Sys.UI.DomElement.addCssClass(this._frame,this._ResizableCssClass)},_onmouseout:function(){!this._tracking&&Sys.UI.DomElement.removeCssClass(this._frame,this._ResizableCssClass)},_onmousedown:function(a){if(!a)a=event;this._onmousedownImplementation(a.clientX,a.clientY)},_onmousedownImplementation:function(b,d){var a=this;a._tracking=true;a._resizeControl(b,d,0,0);a._lining.style.visibility="visible";$addHandler(document,i,a._onmousemoveDelegate);$addHandler(document,j,a._onmouseupDelegate);$addHandler(document,k,a._onselectstartDelegate);Sys.Browser.agent===Sys.Browser.Opera&&$addHandler(document,c,a._onselectstartDelegate);a.raiseResizeBegin()},_onmousemove:function(a){if(!a)a=event;this._onmousemoveImplementation(a.clientX,a.clientY)},_onmousemoveImplementation:function(b,c){var a=this;if(a._tracking){var d=b-a._lastClientX,e=c-a._lastClientY;a._resizeControl(b,c,d,e)}},_onmouseup:function(){var a=this;a._tracking=false;a._rememberSize();a._lining.style.visibility="hidden";$removeHandler(document,i,a._onmousemoveDelegate);$removeHandler(document,j,a._onmouseupDelegate);$removeHandler(document,k,a._onselectstartDelegate);Sys.Browser.agent===Sys.Browser.Opera&&$removeHandler(document,c,a._onselectstartDelegate);Sys.UI.DomElement.removeCssClass(a._frame,a._ResizableCssClass)},_onselectstart:function(a){a.preventDefault();return false},_resizeControl:function(g,h,i,j){var a=this;a._lastClientX=g;a._lastClientY=h;var d=Math.min(Math.max(a._lining.offsetWidth+i,Math.max(a._MinimumWidth,a._handle.offsetWidth)),a._MaximumWidth),c=Math.min(Math.max(a._lining.offsetHeight+j,Math.max(a._MinimumHeight,a._handle.offsetHeight)),a._MaximumHeight);a._lining.style.width=d+b;a._lining.style.height=c+b;a._frame.style.width=d+b;a._frame.style.height=c+b;var e=a._lining.offsetWidth-a._handle.offsetWidth+a._HandleOffsetX,f=a._lining.offsetHeight-a._handle.offsetHeight+a._HandleOffsetY;a._handle.style.left=e+b;a._handle.style.top=f+b;a.raiseResizing()},_rememberSize:function(){var a=this.get_Size();Sys.Extended.UI.ResizableControlBehavior.callBaseMethod(this,"set_ClientState",[a.width+","+a.height]);this.raiseResize()},_measurementToNumber:function(a){return a.replace(b,"")},get_HandleCssClass:function(){return this._HandleCssClass},set_HandleCssClass:function(b){var a="HandleCssClass";if(this._HandleCssClass)throw String.format(Sys.Extended.UI.Resources.ResizableControlBehavior_CannotChangeProperty,a);this._HandleCssClass=b;this.raisePropertyChanged(a)},get_ResizableCssClass:function(){return this._ResizableCssClass},set_ResizableCssClass:function(b){var a="ResizableCssClass";if(this._ResizableCssClass)throw String.format(Sys.Extended.UI.Resources.ResizableControlBehavior_CannotChangeProperty,a);this._ResizableCssClass=b;this.raisePropertyChanged(a)},get_HandleOffsetX:function(){return this._HandleOffsetX},set_HandleOffsetX:function(a){if(this._HandleOffsetX!=a){this._HandleOffsetX=a;this.raisePropertyChanged("HandleOffsetX")}},get_HandleOffsetY:function(){return this._HandleOffsetY},set_HandleOffsetY:function(a){if(this._HandleOffsetY!=a){this._HandleOffsetY=a;this.raisePropertyChanged("HandleOffsetY")}},get_MinimumWidth:function(){return this._MinimumWidth},set_MinimumWidth:function(a){if(this._MinimumWidth!=a){this._MinimumWidth=a;this.raisePropertyChanged("MinimumWidth")}},get_MinimumHeight:function(){return this._MinimumHeight},set_MinimumHeight:function(a){if(this._MinimumHeight!=a){this._MinimumHeight=a;this.raisePropertyChanged("MinimumHeight")}},get_MaximumWidth:function(){return this._MaximumWidth},set_MaximumWidth:function(a){if(this._MaximumWidth!=a){this._MaximumWidth=a;this.raisePropertyChanged("MaximumWidth")}},get_MaximumHeight:function(){return this._MaximumHeight},set_MaximumHeight:function(a){if(this._MaximumHeight!=a){this._MaximumHeight=a;this.raisePropertyChanged("MaximumHeight")}},add_resizing:function(a){this.get_events().addHandler(d,a)},remove_resizing:function(a){this.get_events().removeHandler(d,a)},raiseResizing:function(){var a=this.get_events().getHandler(d);a&&a(this,Sys.EventArgs.Empty)},get_resizing:function(){return this.get_events().getHandler(d)},set_resizing:function(a){if(a&&0<a.length){var b=$common.resolveFunction(a);if(b)this.add_resizing(b);else throw Error.argumentType(l,typeof a,m,String.format(Sys.Extended.UI.Resources.ResizableControlBehavior_InvalidHandler,d));}},add_resize:function(a){this.get_events().addHandler(e,a)},remove_resize:function(a){this.get_events().removeHandler(e,a)},raiseResize:function(){var a=this.get_events().getHandler(e);a&&a(this,Sys.EventArgs.Empty)},get_resize:function(){return this.get_events().getHandler(e)},set_resize:function(a){if(a&&0<a.length){var b=$common.resolveFunction(a);if(b)this.add_resize(b);else throw Error.argumentType(l,typeof a,m,String.format(Sys.Extended.UI.Resources.ResizableControlBehavior_InvalidHandler,e));}},add_resizebegin:function(a){this.get_events().addHandler(f,a)},remove_resizebegin:function(a){this.get_events().removeHandler(f,a)},raiseResizeBegin:function(){var a=this.get_events().getHandler(f);a&&a(this,Sys.EventArgs.Empty)},get_resizebegin:function(){return this.get_events().getHandler(f)},set_resizebegin:function(a){if(a&&0<a.length){var b=$common.resolveFunction(a);if(b)this.add_resizebegin(b);else throw Error.argumentType(l,typeof a,m,String.format(Sys.Extended.UI.Resources.ResizableControlBehavior_InvalidHandler,f));}},get_Size:function(){var a=this;return{width:a._measurementToNumber($common.getCurrentStyle(a._lining,g)),height:a._measurementToNumber($common.getCurrentStyle(a._lining,h))}},set_Size:function(b){var a=this,c=b.width-a._measurementToNumber($common.getCurrentStyle(a._lining,g)),d=b.height-a._measurementToNumber($common.getCurrentStyle(a._lining,h));a._resizeControl(0,0,c,d);a._rememberSize();a.raisePropertyChanged("Size")}};Sys.Extended.UI.ResizableControlBehavior.registerClass("Sys.Extended.UI.ResizableControlBehavior",Sys.Extended.UI.BehaviorBase);Sys.registerComponent(Sys.Extended.UI.ResizableControlBehavior,{name:"resizable"})}if(window.Sys&&Sys.loader)Sys.loader.registerScript(b,["ExtendedBase","ExtendedCommon"],a);else a()})();