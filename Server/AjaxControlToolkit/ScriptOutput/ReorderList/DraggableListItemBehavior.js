Type.registerNamespace("Sys.Extended.UI");Sys.Extended.UI.DraggableListItem=function(c){var b=null,a=this;Sys.Extended.UI.DraggableListItem.initializeBase(a,[c]);a._data=b;a._handle=b;a._dragVisualTemplate=b;a._dragVisualTemplateInstance=b;a._mouseDownHandler=b};Sys.Extended.UI.DraggableListItem.prototype={dispose:function(){var a=this.get_element();this.set_handle(null);Sys.Extended.UI.DraggableListItem.callBaseMethod(this,"dispose")},get_data:function(){var a=this;if(a._data==null){var b=a._findDragSource();if(b!=null&&Sys.Extended.UI.DragDropList.IsValidDataType(b.get_dragDataType()))return a.get_element()}return a._data},set_data:function(a){if(this._data!=a){this._data=a;this.raisePropertyChanged("data")}},get_handle:function(){return this._handle},set_handle:function(b){var c="mousedown",a=this;if(a._handle!=null){$removeHandler(a._handle,c,a.get_mouseDownHandler());a._handle.__draggableBehavior=null}if(b){if(b.element)b=b.element;a._handle=b;a.raisePropertyChanged("handle");a._handle.__draggableBehavior=a;$addHandler(a._handle,c,a.get_mouseDownHandler());a._handle.__draggableBehavior=a}else a._handle=null},get_mouseDownHandler:function(){var a=this;if(a._mouseDownHandler==null)a._mouseDownHandler=Function.createDelegate(a,a._onMouseDown);return a._mouseDownHandler},get_dragVisualTemplate:function(){return this._dragVisualTemplate},set_dragVisualTemplate:function(a){if(this._dragVisualTemplate!=a){this._dragVisualTemplate=a;this.raisePropertyChanged("dragVisualTemplate")}},_onMouseDown:function(a){window._event=a.rawEvent;this._handle.__draggableBehavior._mouseDownHandlerInternal(a)},_mouseDownHandlerInternal:function(b){var a=this,b=window.testEvent?window.testEvent:b;if(b.button<=1){var c=a._findDragSource();if(c!=null){var d=a._createDragVisual();c.startDragDrop(a.get_element(),a.get_data(),d);b.returnValue=false}}},_createDragVisual:function(){var a=this,c=window.testEvent?window.testEvent:window.event;if(a._dragVisualTemplate!=null){if(a._dragVisualTemplateInstance==null)a._dragVisualTemplateInstance=a._dragVisualTemplate.cloneElement();else!Sys.UI.DragDropManager._getInstance().hasParent(a._dragVisualTemplateInstance)&&a.get_element().appendChild(a._dragVisualTemplateInstance);var b={x:c.clientX,y:c.clientY};b=Sys.UI.DragDropManager._getInstance().addPoints(b,Sys.UI.DragDropManager._getInstance().getScrollOffset(document.body,true));$common.setLocation(a._dragVisualTemplateInstance,b)}return a._dragVisualTemplateInstance},_findDragSource:function(){var a=this.get_element();while(a!=null){if(a.__dragDropList!=null)return a.__dragDropList;a=a.parentNode}return null}};Sys.Extended.UI.DraggableListItem.registerClass("Sys.Extended.UI.DraggableListItem",Sys.Extended.UI.BehaviorBase);