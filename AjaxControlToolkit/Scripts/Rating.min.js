Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.RatingBehavior=function(t){Sys.Extended.UI.RatingBehavior.initializeBase(this,[t]),this._starCssClass="rating_star",this._filledStarCssClass="rating_filled",this._emptyStarCssClass="rating_empty",this._waitingStarCssClass=null,this._isServerControl=!1,this._readOnly=!1,this._ratingValue=0,this._currentRating=0,this._maxRatingValue=5,this._tag="",this._ratingDirection=0,this._stars=null,this._callbackID=null,this._mouseOutHandler=Function.createDelegate(this,this._onMouseOut),this._starClickHandler=Function.createDelegate(this,this._onStarClick),this._starMouseOverHandler=Function.createDelegate(this,this._onStarMouseOver),this._keyDownHandler=Function.createDelegate(this,this._onKeyDownBack),this._autoPostBack=!1},Sys.Extended.UI.RatingBehavior.prototype={initialize:function(){Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"initialize");var t=this.get_element();this._stars=[];for(var e=1;e<=this._maxRatingValue;e++)starElement=$get(t.id+"_Star_"+e),starElement.value=e,Array.add(this._stars,starElement),$addHandler(starElement,"click",this._starClickHandler),$addHandler(starElement,"mouseover",this._starMouseOverHandler);$addHandler(t,"mouseout",this._mouseOutHandler),$addHandler(t,"keydown",this._keyDownHandler),this._update()},dispose:function(){var t=this.get_element();if(this._stars){for(var e=0;e<this._stars.length;e++){var s=this._stars[e];$removeHandler(s,"click",this._starClickHandler),$removeHandler(s,"mouseover",this._starMouseOverHandler)}this._stars=null}$removeHandler(t,"mouseout",this._mouseOutHandler),$removeHandler(t,"keydown",this._keyDownHandler),Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"dispose")},_onError:function(t,e){alert(String.format(Sys.Extended.UI.Resources.Rating_CallbackError,t))},_receiveServerData:function(t,e){e._waitingMode(!1),e.raise_endClientCallback(t)},_onMouseOut:function(t){this._readOnly||(this._currentRating=this._ratingValue,this._update(),this.raise_mouseOut(this._currentRating))},_onStarClick:function(t){this._readOnly||(this._ratingValue!=this._currentRating?this._setRatingCore(this._currentRating,!0):this.doCallback(!0))},_onStarMouseOver:function(t){this._readOnly||(0==this._ratingDirection?this._currentRating=t.target.value:this._currentRating=this._maxRatingValue+1-t.target.value,this._update(),this.raise_mouseOver(this._currentRating))},_onKeyDownBack:function(t){if(!this._readOnly){var e=t.keyCode?t.keyCode:t.rawEvent.keyCode;e==Sys.UI.Key.right||e==Sys.UI.Key.up?(this._currentRating=Math.min(this._currentRating+1,this._maxRatingValue),this.set_rating(this._currentRating),t.preventDefault(),t.stopPropagation()):e!=Sys.UI.Key.left&&e!=Sys.UI.Key.down||(this._currentRating=Math.max(this._currentRating-1,1),this.set_rating(this._currentRating),t.preventDefault(),t.stopPropagation())}},_waitingMode:function(t){for(var e=0;e<this._maxRatingValue;e++){var s;s=0==this._ratingDirection?this._stars[e]:this._stars[this._maxRatingValue-e-1],this._currentRating>e?this._waitingStarCssClass&&(t?(Sys.UI.DomElement.removeCssClass(s,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(s,this._waitingStarCssClass)):(Sys.UI.DomElement.removeCssClass(s,this._waitingStarCssClass),Sys.UI.DomElement.addCssClass(s,this._filledStarCssClass))):(this._waitingStarCssClass&&Sys.UI.DomElement.removeCssClass(s,this._waitingStarCssClass),Sys.UI.DomElement.removeCssClass(s,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(s,this._emptyStarCssClass))}},_update:function(){var t=this.get_element();$get(t.id+"_A").title=this._currentRating;for(var e=0;e<this._maxRatingValue;e++){var s;s=0==this._ratingDirection?this._stars[e]:this._stars[this._maxRatingValue-e-1],this._currentRating>e?(Sys.UI.DomElement.removeCssClass(s,this._emptyStarCssClass),Sys.UI.DomElement.addCssClass(s,this._filledStarCssClass)):(Sys.UI.DomElement.removeCssClass(s,this._filledStarCssClass),Sys.UI.DomElement.addCssClass(s,this._emptyStarCssClass))}},add_rated:function(t){this.get_events().addHandler("rated",t)},remove_rated:function(t){this.get_events().removeHandler("rated",t)},raise_rated:function(t){var e=this.get_events().getHandler("rated");e&&e(this,new Sys.Extended.UI.RatingEventArgs(t))},add_Rated:function(t){Sys.Extended.Deprecated("add_Rated(handler)","add_rated(handler)"),this.add_rated(t)},remove_Rated:function(t){Sys.Extended.Deprecated("remove_Rated(handler)","remove_rated(handler)"),this.remove_rated(t)},raiseRated:function(t){Sys.Extended.Deprecated("raiseRated(rating)","raise_rated(rating)"),this.raise_rated(t)},add_mouseOver:function(t){this.get_events().addHandler("mouseOver",t)},remove_mouseOver:function(t){this.get_events().removeHandler("mouseOver",t)},raise_mouseOver:function(t){var e=this.get_events().getHandler("mouseOver");e&&e(this,new Sys.Extended.UI.RatingEventArgs(rating_tmp))},add_MouseOver:function(t){Sys.Extended.Deprecated("add_MouseOver(handler)","add_mouseOver(handler)"),this.add_mouseOver(t)},remove_MouseOver:function(t){Sys.Extended.Deprecated("remove_MouseOver(handler)","remove_mouseOver(handler)"),this.remove_mouseOver(t)},raiseMouseOver:function(t){Sys.Extended.Deprecated("raiseMouseOver(rating_tmp)","raise_mouseOver(ratingTmp)"),this.raise_mouseOver(t)},add_mouseOut:function(t){this.get_events().addHandler("mouseOut",t)},remove_mouseOut:function(t){this.get_events().removeHandler("mouseOut",t)},raise_mouseOut:function(t){var e=this.get_events().getHandler("mouseOut");e&&e(this,new Sys.Extended.UI.RatingEventArgs(t))},add_MouseOut:function(t){Sys.Extended.Deprecated("add_MouseOut(handler)","add_mouseOut(handler)"),this.add_mouseOut(t)},remove_MouseOut:function(t){Sys.Extended.Deprecated("remove_MouseOut(handler)","remove_mouseOut(handler)"),this.remove_mouseOut(t)},raiseMouseOut:function(t){Sys.Extended.Deprecated("raiseMouseOut(rating_old)","raise_mouseOut(ratingOld)"),this.raise_mouseOut(t)},add_endClientCallback:function(t){this.get_events().addHandler("endClientCallback",t)},remove_endClientCallback:function(t){this.get_events().removeHandler("endClientCallback",t)},raise_endClientCallback:function(t){var e=this.get_events().getHandler("endClientCallback");e&&e(this,new Sys.Extended.UI.RatingCallbackResultEventArgs(t))},add_EndClientCallback:function(t){Sys.Extended.Deprecated("add_EndClientCallback(handler)","add_endClientCallback(handler)"),this.add_endClientCallback(t)},remove_EndClientCallback:function(t){Sys.Extended.Deprecated("remove_EndClientCallback(handler)","remove_endClientCallback(handler)"),this.remove_endClientCallback(t)},raiseEndClientCallback:function(t){Sys.Extended.Deprecated("raiseEndClientCallback()","raise_endClientCallback()"),this.raise_endClientCallback(t)},get_autoPostBack:function(){return this._autoPostBack},set_autoPostBack:function(t){this._autoPostBack=t},get_AutoPostBack:function(){return Sys.Extended.Deprecated("get_AutoPostBack()","get_autoPostBack()"),this.get_autoPostBack()},set_AutoPostBack:function(t){Sys.Extended.Deprecated("set_AutoPostBack(value)","set_autoPostBack(value)"),this.set_autoPostBack(t)},get_stars:function(){return this._stars},get_Stars:function(){return Sys.Extended.Deprecated("get_Stars()","get_stars()"),this.get_stars()},get_tag:function(){return this._tag},set_tag:function(t){this._tag!=t&&(this._tag=t,this.raisePropertyChanged("tag"))},get_Tag:function(){return Sys.Extended.Deprecated("get_Tag()","get_tag()"),this.get_tag()},set_Tag:function(t){Sys.Extended.Deprecated("set_Tag(value)","set_tag(value)"),this.set_tag(t)},get_callbackID:function(){return this._callbackID},set_callbackID:function(t){this._callbackID=t},get_CallbackID:function(){return Sys.Extended.Deprecated("get_CallbackID()","get_callbackID()"),this.get_callbackID()},set_CallbackID:function(t){Sys.Extended.Deprecated("set_CallbackID(value)","set_callbackID(value)"),this.set_callbackID(t)},get_ratingDirection:function(){return this._ratingDirection},set_ratingDirection:function(t){this._ratingDirection!=t&&(this._ratingDirection=t,this.get_isInitialized()&&this._update(),this.raisePropertyChanged("ratingDirection"))},get_RatingDirection:function(){return Sys.Extended.Deprecated("get_RatingDirection()","get_ratingDirection()"),this.get_ratingDirection()},set_RatingDirection:function(t){Sys.Extended.Deprecated("set_RatingDirection(value)","set_ratingDirection(value)"),this.set_ratingDirection(t)},get_emptyStarCssClass:function(){return this._emptyStarCssClass},set_emptyStarCssClass:function(t){this._emptyStarCssClass!=t&&(this._emptyStarCssClass=t,this.raisePropertyChanged("emptyStarCssClass"))},get_EmptyStarCssClass:function(){return Sys.Extended.Deprecated("get_EmptyStarCssClass()","get_emptyStarCssClass()"),this.get_emptyStarCssClass()},set_EmptyStarCssClass:function(t){Sys.Extended.Deprecated("set_EmptyStarCssClass(value)","set_emptyStarCssClass(value)"),this.set_emptyStarCssClass(t)},get_filledStarCssClass:function(){return this._filledStarCssClass},set_filledStarCssClass:function(t){this._filledStarCssClass!=t&&(this._filledStarCssClass=t,this.raisePropertyChanged("filledStarCssClass"))},get_FilledStarCssClass:function(){return Sys.Extended.Deprecated("get_FilledStarCssClass()","get_filledStarCssClass()"),this.get_filledStarCssClass()},set_FilledStarCssClass:function(t){Sys.Extended.Deprecated("set_FilledStarCssClass(value)","set_filledStarCssClass(value)"),this.set_filledStarCssClass(t)},get_waitingStarCssClass:function(){return this._waitingStarCssClass},set_waitingStarCssClass:function(t){this._waitingStarCssClass!=t&&(this._waitingStarCssClass=t,this.raisePropertyChanged("waitingStarCssClass"))},get_WaitingStarCssClass:function(){return Sys.Extended.Deprecated("get_WaitingStarCssClass()","get_waitingStarCssClass()"),this.get_waitingStarCssClass()},set_WaitingStarCssClass:function(t){Sys.Extended.Deprecated("set_WaitingStarCssClass(value)","set_waitingStarCssClass(value)"),this.set_waitingStarCssClass(t)},doCallback:function(t){if(this._isServerControl){this._waitingMode(!0);var e=Number(!!t)+";"+this._currentRating+";"+this._tag,s=this._callbackID;this._autoPostBack?__doPostBack(s,e):WebForm_DoCallback(s,e,this._receiveServerData,this,this._onError,!0)}},get_rating:function(){var t=Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"get_ClientState");return null!==t&&t.length&&(this._ratingValue=t),""==this._ratingValue&&(this._ratingValue=null),this._ratingValue},set_rating:function(t){this._setRatingCore(t)},_setRatingCore:function(t,e){if(this._ratingValue!=t&&(this._ratingValue=t,this._currentRating=t,this.get_isInitialized())){if(t<0||t>this._maxRatingValue)return;this._update(),Sys.Extended.UI.RatingBehavior.callBaseMethod(this,"set_ClientState",[this._ratingValue]),this.raisePropertyChanged("rating"),this.raise_rated(this._currentRating),this.doCallback(e)}},get_Rating:function(){return Sys.Extended.Deprecated("get_Rating()","get_rating()"),this.get_rating()},set_Rating:function(t){Sys.Extended.Deprecated("set_Rating(value)","set_rating(value)"),this.set_rating(t)},get_maxRating:function(){return this._maxRatingValue},set_maxRating:function(t){this._maxRatingValue!=t&&(this._maxRatingValue=t,this.raisePropertyChanged("maxRating"))},get_MaxRating:function(){return Sys.Extended.Deprecated("get_MaxRating()","get_maxRating()"),this.get_maxRating()},set_MaxRating:function(t){Sys.Extended.Deprecated("set_MaxRating(value)","set_maxRating(value)"),this.set_maxRating(t)},get_readOnly:function(){return this._readOnly},set_readOnly:function(t){this._readOnly!=t&&(this._readOnly=t,this.raisePropertyChanged("readOnly"))},get_ReadOnly:function(){return Sys.Extended.Deprecated("get_ReadOnly()","get_readOnly()"),this.get_readOnly()},set_ReadOnly:function(t){Sys.Extended.Deprecated("set_ReadOnly(value)","set_readOnly(value)"),this.set_readOnly(t)},get_starCssClass:function(){return this._starCssClass},set_starCssClass:function(t){this._starCssClass!=t&&(this._starCssClass=t,this.raisePropertyChanged("starCssClass"))},get_StarCssClass:function(){return Sys.Extended.Deprecated("get_StarCssClass()","get_starCssClass()"),this.get_starCssClass()},set_StarCssClass:function(t){Sys.Extended.Deprecated("set_StarCssClass(value)","set_starCssClass(value)"),this.set_starCssClass(t)}},Sys.Extended.UI.RatingBehavior.registerClass("Sys.Extended.UI.RatingBehavior",Sys.Extended.UI.BehaviorBase),Sys.Extended.UI.RatingEventArgs=function(t){Sys.Extended.UI.RatingEventArgs.initializeBase(this),this._rating=t},Sys.Extended.UI.RatingEventArgs.prototype={get_Rating:function(){return this._rating}},Sys.Extended.UI.RatingEventArgs.registerClass("Sys.Extended.UI.RatingEventArgs",Sys.EventArgs),Sys.Extended.UI.RatingCallbackResultEventArgs=function(t){Sys.Extended.UI.RatingCallbackResultEventArgs.initializeBase(this),this._result=t},Sys.Extended.UI.RatingCallbackResultEventArgs.prototype={get_CallbackResult:function(){return this._result}},Sys.Extended.UI.RatingCallbackResultEventArgs.registerClass("Sys.Extended.UI.RatingCallbackResultEventArgs",Sys.EventArgs);