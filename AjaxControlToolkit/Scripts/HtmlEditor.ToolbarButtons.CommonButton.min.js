Type.registerNamespace("Sys.Extended.UI.HtmlEditor.ToolbarButtons"),Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton=function(e){Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.initializeBase(this,[e]),this._loaded=!1,this._preservePlace=!1,this._editPanel=null,this._activeModes=null,this._app_onload$delegate=Function.createDelegate(this,this._app_onload),this._cssClass="",this._onmouseover$delegate=Function.createDelegate(this,this._onmouseover),this._onmouseout$delegate=Function.createDelegate(this,this._onmouseout),this._onmousedown$delegate=Function.createDelegate(this,this._onmousedown),this._onmouseup$delegate=Function.createDelegate(this,this._onmouseup),this._onclick$delegate=Function.createDelegate(this,this._onclick)},Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.prototype={get_preservePlace:function(){return this._preservePlace},set_preservePlace:function(e){this._preservePlace=e},set_activeEditPanel:function(e){this._editPanel=e,null==this._editPanel?this.hideButton():this.isAllowedActiveMode(this._editPanel.get_activeMode())&&this.canBeShown()?(this.showButton(),this.onEditPanelActivity()):this.hideButton()},isImage:function(){return!0},checkRangeInDesign:function(){if("undefined"==typeof this._designPanel)return!1;if(null==this._designPanel)return!1;if(this._designPanel.isPopup())return!1;var e=Sys.Extended.UI.HtmlEditor.getSelParent(this._designPanel);return 3==e.nodeType&&(e=e.parentNode),e.ownerDocument==this._designPanel._doc},get_buttonName:function(){var e=Object.getType(this).getName();return e=e.substring(e.lastIndexOf(".")+1)},get_message:function(messageName){var expression="Sys.Extended.UI.Resources.HtmlEditor_toolbar_button_"+this.get_buttonName()+"_message_"+messageName;return eval(expression)},isDisplayed:function(){var e=this.get_element();if(e){var t=e.style;return"none"!=t.display&&"hidden"!=t.visibility}return!1},hideButton:function(){var e=this.get_element();e&&(this._preservePlace?e.style.visibility="hidden":e.style.display="none")},showButton:function(){var e=this.get_element();e&&("none"==e.style.display&&(e.style.display=""),this._preservePlace&&(e.style.visibility="visible"))},canBeShown:function(){return!0},onEditPanelActivity:function(){},get_activeModes:function(){return null==this._activeModes&&(this._activeModes=[]),this._activeModes},set_activeModes:function(e){this.get_activeModes().push(e)},get_activeModesIds:function(){},set_activeModesIds:function(e){for(var t=e.split(";"),s=0;s<t.length;s++)this.set_activeModes(parseInt(t[s]))},set_toolTip:function(e){this.get_element().title=e},get_toolTip:function(){return this.get_element().title},isAllowedActiveMode:function(e){for(var t=0;t<this.get_activeModes().length;t++)if(this.get_activeModes()[t]==e)return!0;return!1},initialize:function(){function e(t){if(1==t.nodeType&&t.tagName){var s=t.tagName.toUpperCase();"INPUT"!=s&&"TEXTAREA"!=s&&"IFRAME"!=s&&(t.unselectable="on");for(var o=0;o<t.childNodes.length;o++)e(t.childNodes.item(o))}}Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.callBaseMethod(this,"initialize"),Sys.Application.add_load(this._app_onload$delegate);var t=this.get_element();if(this._preservePlace&&!this.canBeShown()&&(t.style.display="none"),this._cssClass=t.className,this.isImage()&&$addHandlers(t,{mouseover:this._onmouseover$delegate,mouseout:this._onmouseout$delegate,mousedown:this._onmousedown$delegate,mouseup:this._onmouseup$delegate,click:this._onclick$delegate}),Sys.Extended.UI.HtmlEditor.isIE)e(t);else try{t.style.MozUserSelect="none",t.parentNode.style.MozUserSelect="none"}catch(e){}},dispose:function(){this.isImage()&&$common.removeHandlers(this.get_element(),{mouseover:this._onmouseover$delegate,mouseout:this._onmouseout$delegate,mousedown:this._onmousedown$delegate,mouseup:this._onmouseup$delegate,click:this._onclick$delegate}),this._loaded=!1,Sys.Application.remove_load(this._app_onload$delegate),Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.callBaseMethod(this,"dispose")},_app_onload:function(e,t){this.onButtonLoaded(),this._loaded=!0},onButtonLoaded:function(){},_onmouseover:function(e){return!!this.isEnable()&&(Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_hover"),!0)},_onmouseout:function(e){return!!this.isEnable()&&(Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_hover"),Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_mousedown"),!0)},_onmousedown:function(e){return this.isEnable()?(Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_mousedown"),!1):null},_onmouseup:function(e){return!!this.isEnable()&&(Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_mousedown"),!0)},_onclick:function(e){return!!this.isEnable()},isEnable:function(){return!!this._loaded&&null!=this._editPanel},setActivity:function(e){e?Sys.UI.DomElement.addCssClass(this.get_element(),this._cssClass+"_active"):Sys.UI.DomElement.removeCssClass(this.get_element(),this._cssClass+"_active")}},Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton.registerClass("Sys.Extended.UI.HtmlEditor.ToolbarButtons.CommonButton",Sys.UI.Control);