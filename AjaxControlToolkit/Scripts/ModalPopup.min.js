Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.ModalPopupRepositionMode=function(){throw Error.invalidOperation()},Sys.Extended.UI.ModalPopupRepositionMode.prototype={None:0,RepositionOnWindowResize:1,RepositionOnWindowScroll:2,RepositionOnWindowResizeAndScroll:3},Sys.Extended.UI.ModalPopupRepositionMode.registerEnum("Sys.Extended.UI.ModalPopupRepositionMode"),Sys.Extended.UI.ModalPopupBehavior=function(e){Sys.Extended.UI.ModalPopupBehavior.initializeBase(this,[e]),this._popupControlID=null,this._popupDragHandleControlID=null,this._backgroundCssClass=null,this._dropShadow=!1,this._drag=!1,this._okControlID=null,this._cancelControlID=null,this._onOkScript=null,this._onCancelScript=null,this._xCoordinate=-1,this._yCoordinate=-1,this._repositionMode=Sys.Extended.UI.ModalPopupRepositionMode.RepositionOnWindowResizeAndScroll,this._onShown=new Sys.Extended.UI.Animation.GenericAnimationBehavior(e),this._onHidden=new Sys.Extended.UI.Animation.GenericAnimationBehavior(e),this._onShowing=new Sys.Extended.UI.Animation.GenericAnimationBehavior(e),this._onHiding=new Sys.Extended.UI.Animation.GenericAnimationBehavior(e),this._backgroundElement=null,this._foregroundElement=null,this._relativeOrAbsoluteParentElement=null,this._popupElement=null,this._dragHandleElement=null,this._showHandler=null,this._okHandler=null,this._cancelHandler=null,this._scrollHandler=null,this._resizeHandler=null,this._windowHandlersAttached=!1,this._dropShadowBehavior=null,this._dragBehavior=null,this._isIE6=!1,this._saveTabIndexes=new Array,this._saveDesableSelect=new Array,this._tagWithTabIndex=new Array("A","AREA","BUTTON","INPUT","OBJECT","SELECT","TEXTAREA","IFRAME"),this._isAnimationJustEnded=!1,this._hidingAnimationEndedHandler=null,this._showingAnimationEndedHandler=null},Sys.Extended.UI.ModalPopupBehavior.prototype={initialize:function(){Sys.Extended.UI.ModalPopupBehavior.callBaseMethod(this,"initialize"),this._isIE6=Sys.Browser.agent==Sys.Browser.InternetExplorer&&Sys.Browser.version<7,this._popupDragHandleControlID&&(this._dragHandleElement=$get(this._popupDragHandleControlID)),this._popupElement=$get(this._popupControlID),this._createDomElements(),this._showHandler=Function.createDelegate(this,this._onShow),$addHandler(this.get_element(),"click",this._showHandler),this._okControlID&&(this._okHandler=Function.createDelegate(this,this._onOk),$addHandler($get(this._okControlID),"click",this._okHandler)),this._cancelControlID&&(this._cancelHandler=Function.createDelegate(this,this._onCancel),$addHandler($get(this._cancelControlID),"click",this._cancelHandler)),this._scrollHandler=Function.createDelegate(this,this._onLayout),this._resizeHandler=Function.createDelegate(this,this._onLayout),this.registerPartialUpdateEvents(),this._resetAnimationsTarget(),this._onHiding.get_animation()&&(this._hidingAnimationEndedHandler=Function.createDelegate(this,function(){this._isAnimationJustEnded=!0,this.hide()}),this._onHiding.get_animation().add_ended(this._hidingAnimationEndedHandler)),this._onShowing.get_animation()&&(this._showingAnimationEndedHandler=Function.createDelegate(this,function(){this._isAnimationJustEnded=!0,this.show()}),this._onShowing.get_animation().add_ended(this._showingAnimationEndedHandler))},dispose:function(){this._hideImplementation(),this._foregroundElement&&this._foregroundElement.parentNode&&(this._foregroundElement.parentNode.removeChild(this._backgroundElement),this._dropShadow&&(this._foregroundElement.parentNode.appendChild(this._popupElement),this._foregroundElement.parentNode.removeChild(this._foregroundElement))),this._scrollHandler=null,this._resizeHandler=null,this._cancelHandler&&$get(this._cancelControlID)&&($removeHandler($get(this._cancelControlID),"click",this._cancelHandler),this._cancelHandler=null),this._okHandler&&$get(this._okControlID)&&($removeHandler($get(this._okControlID),"click",this._okHandler),this._okHandler=null),this._showHandler&&($removeHandler(this.get_element(),"click",this._showHandler),this._showHandler=null),this._hidingAnimationEndedHandler&&this._onHiding.get_animation().remove_ended(this._hidingAnimationEndedHandler),this._showingAnimationEndedHandler&&this._onShowing.get_animation().remove_ended(this._showingAnimationEndedHandler),Sys.Extended.UI.ModalPopupBehavior.callBaseMethod(this,"dispose")},_createDomElements:function(){this._dropShadow?(this._foregroundElement=document.createElement("div"),this._foregroundElement.id=this.get_id()+"_foregroundElement",this._popupElement.parentNode.appendChild(this._foregroundElement),this._foregroundElement.appendChild(this._popupElement)):this._foregroundElement=this._popupElement,this._backgroundElement=document.createElement("div"),this._backgroundElement.setAttribute("data-act-control-type","modalPopupBackground"),this._backgroundElement.id=this.get_id()+"_backgroundElement",this._backgroundElement.style.display="none",this._backgroundElement.style.position="fixed",this._backgroundElement.style.left="0px",this._backgroundElement.style.top="0px",this._backgroundCssClass&&(this._backgroundElement.className=this._backgroundCssClass),this._foregroundElement.parentNode.appendChild(this._backgroundElement),this._foregroundElement.style.display="none",this._foregroundElement.style.position="fixed",this._setZIndex()},_setZIndex:function(){var e=parseInt(this._findTopModalPopupBackgroundZIndex());this._backgroundElement.style.zIndex=e?parseInt(e+1):parseInt(Sys.Extended.UI.zIndex.ModalPopupBackground),this._foregroundElement.style.zIndex=parseInt($common.getCurrentStyle(this._backgroundElement,"zIndex",this._backgroundElement.style.zIndex))+1},_findTopModalPopupBackgroundZIndex:function(){var e=this._getLastPopup();return e?e._backgroundElement.style.zIndex:void 0},_getLastPopup:function(){var e=Sys.Extended.UI.ModalPopupBehavior.popups;return e.length?e[e.length-1]:void 0},_attachPopup:function(){Sys.Extended.UI.ModalPopupBehavior.popups.push(this),this._dropShadow&&!this._dropShadowBehavior&&(this._dropShadowBehavior=$create(Sys.Extended.UI.DropShadowBehavior,{},null,null,this._popupElement)),this._dragHandleElement&&!this._dragBehavior&&(this._dragBehavior=$create(Sys.Extended.UI.FloatingBehavior,{handle:this._dragHandleElement},null,null,this._foregroundElement)),$addHandler(window,"resize",this._resizeHandler),$addHandler(window,"scroll",this._scrollHandler),this._windowHandlersAttached=!0},_detachPopup:function(){this._windowHandlersAttached&&(this._scrollHandler&&$removeHandler(window,"scroll",this._scrollHandler),this._resizeHandler&&$removeHandler(window,"resize",this._resizeHandler),this._windowHandlersAttached=!1),this._dragBehavior&&(this._dragBehavior.dispose(),this._dragBehavior=null),this._dropShadowBehavior&&(this._dropShadowBehavior.dispose(),this._dropShadowBehavior=null),Sys.Extended.UI.ModalPopupBehavior.popups.pop()},_onShow:function(e){if(!this.get_element().disabled)return this.show(),e.preventDefault(),!1},_onOk:function(e){var t=$get(this._okControlID);if(t&&!t.disabled)return this.hide()&&this._onOkScript&&window.setTimeout(this._onOkScript,0),e.preventDefault(),!1},_onCancel:function(e){var t=$get(this._cancelControlID);if(t&&!t.disabled)return this.hide()&&this._onCancelScript&&window.setTimeout(this._onCancelScript,0),e.preventDefault(),!1},_onLayout:function(e){var t=this._getLastPopup();if(t===this){var n=this.get_repositionMode();(n!==Sys.Extended.UI.ModalPopupRepositionMode.RepositionOnWindowScroll&&n!==Sys.Extended.UI.ModalPopupRepositionMode.RepositionOnWindowResizeAndScroll||"scroll"!==e.type)&&(n!==Sys.Extended.UI.ModalPopupRepositionMode.RepositionOnWindowResize&&n!==Sys.Extended.UI.ModalPopupRepositionMode.RepositionOnWindowResizeAndScroll||"resize"!==e.type)?this._layoutBackgroundElement():this._layout()}},show:function(){if(this._isAnimationJustEnded)this._isAnimationJustEnded=!1;else{var e=new Sys.CancelEventArgs;if(this.raise_showing(e),e.get_cancel())return;if(this._onShowing.get_animation())return void this._onShowing.play()}if(this.populate(),this._attachPopup(),this._setZIndex(),this._backgroundElement.style.display="",this._foregroundElement.style.display="",this._popupElement.style.display="",this._isIE6){this._foregroundElement.style.position="absolute",this._backgroundElement.style.position="absolute";for(var t=this._foregroundElement.parentNode;t&&t!=document.documentElement;){if("relative"==t.style.position||"absolute"==t.style.position){this._relativeOrAbsoluteParentElement=t;break}t=t.parentNode}}this.disableTab(),this._layout(),this._layout(),this.raise_shown(Sys.EventArgs.Empty),this._onShown.play()},disableTab:function(){var e,t=0,n=new Array;Array.clear(this._saveTabIndexes);for(var o=0;o<this._tagWithTabIndex.length;o++){e=this._foregroundElement.getElementsByTagName(this._tagWithTabIndex[o]);for(var i=0;i<e.length;i++)n[t]=e[i],t++}t=0;for(var o=0;o<this._tagWithTabIndex.length;o++){e=document.getElementsByTagName(this._tagWithTabIndex[o]);for(var i=0;i<e.length;i++)Array.indexOf(n,e[i])==-1&&(this._saveTabIndexes[t++]={tag:e[i],index:e[i].tabIndex},e[i].tabIndex="-1")}if(t=0,Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version<7){for(var s=new Array,o=0;o<this._tagWithTabIndex.length;o++){e=this._foregroundElement.getElementsByTagName("SELECT");for(var i=0;i<e.length;i++)s[t]=e[i],t++}t=0,Array.clear(this._saveDesableSelect),e=document.getElementsByTagName("SELECT");for(var i=0;i<e.length;i++)Array.indexOf(s,e[i])==-1&&(this._saveDesableSelect[t++]={tag:e[i],visib:$common.getCurrentStyle(e[i],"visibility")},e[i].style.visibility="hidden")}},restoreTab:function(){for(var e=0;e<this._saveTabIndexes.length;e++)this._saveTabIndexes[e].tag.tabIndex=this._saveTabIndexes[e].index;if(Array.clear(this._saveTabIndexes),Sys.Browser.agent===Sys.Browser.InternetExplorer&&Sys.Browser.version<7){for(var t=0;t<this._saveDesableSelect.length;t++)this._saveDesableSelect[t].tag.style.visibility=this._saveDesableSelect[t].visib;Array.clear(this._saveDesableSelect)}},hide:function(){if(this._isAnimationJustEnded)this._isAnimationJustEnded=!1;else{var e=new Sys.CancelEventArgs;if(this.raise_hiding(e),e.get_cancel())return!1;if(this._onHiding.get_animation())return this._onHiding.play(),!0}return this._hideImplementation(),this.raise_hidden(Sys.EventArgs.Empty),this._onHidden.play(),!0},_hideImplementation:function(){this._backgroundElement.style.display="none",this._foregroundElement.style.display="none",this.restoreTab(),this._detachPopup()},_layout:function(){var e=document.documentElement.scrollLeft?document.documentElement.scrollLeft:document.body.scrollLeft,t=document.documentElement.scrollTop?document.documentElement.scrollTop:document.body.scrollTop,n=$common.getClientBounds(),o=n.width,i=n.height;this._layoutBackgroundElement();var s=0,r=0;if(this._xCoordinate<0){var d=this._foregroundElement.offsetWidth?this._foregroundElement.offsetWidth:this._foregroundElement.scrollWidth;s=(o-d)/2,"absolute"==this._foregroundElement.style.position&&(s+=e),this._foregroundElement.style.left=s+"px"}else this._isIE6?(this._foregroundElement.style.left=this._xCoordinate+e+"px",s=this._xCoordinate+e):(this._foregroundElement.style.left=this._xCoordinate+"px",s=this._xCoordinate);if(this._yCoordinate<0){var a=this._foregroundElement.offsetHeight?this._foregroundElement.offsetHeight:this._foregroundElement.scrollHeight;r=(i-a)/2,"absolute"==this._foregroundElement.style.position&&(r+=t),this._foregroundElement.style.top=r+"px"}else this._isIE6?(this._foregroundElement.style.top=this._yCoordinate+t+"px",r=this._yCoordinate+t):(this._foregroundElement.style.top=this._yCoordinate+"px",r=this._yCoordinate);this._layoutForegroundElement(s,r),this._dropShadowBehavior&&(this._dropShadowBehavior.setShadow(),window.setTimeout(Function.createDelegate(this,this._fixupDropShadowBehavior),0)),this._layoutBackgroundElement()},_layoutForegroundElement:function(e,t){if(this._isIE6&&this._relativeOrAbsoluteParentElement){var n=$common.getLocation(this._foregroundElement),o=$common.getLocation(this._relativeOrAbsoluteParentElement),i=n.x;i!=e&&(this._foregroundElement.style.left=e-o.x+"px");var s=n.y;s!=t&&(this._foregroundElement.style.top=t-o.y+"px")}},_layoutBackgroundElement:function(){if(this._isIE6){var e=$common.getLocation(this._backgroundElement),t=e.x;0!=t&&(this._backgroundElement.style.left=-t+"px");var n=e.y;0!=n&&(this._backgroundElement.style.top=-n+"px")}var o=$common.getClientBounds(),i=o.width,s=o.height;this._backgroundElement.style.width=Math.max(Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i)+"px",this._backgroundElement.style.height=Math.max(Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),s)+"px"},_fixupDropShadowBehavior:function(){this._dropShadowBehavior&&this._dropShadowBehavior.setShadow()},_partialUpdateEndRequest:function(e,t){if(Sys.Extended.UI.ModalPopupBehavior.callBaseMethod(this,"_partialUpdateEndRequest",[e,t]),this.get_element()){var n=t.get_dataItems()[this.get_element().id];"show"==n?this.show():"hide"==n&&this.hide()}this._layout()},_onPopulated:function(e,t){Sys.Extended.UI.ModalPopupBehavior.callBaseMethod(this,"_onPopulated",[e,t]),this._layout()},_replaceAnimationTarget:function(e,t){var n=this[e].get_json();this[e]=new Sys.Extended.UI.Animation.GenericAnimationBehavior(t),this[e].set_json(n),this[e].initialize()},_resetAnimationsTarget:function(){var e=$get(this.get_popupControlID());this._replaceAnimationTarget("_onShowing",e),this._replaceAnimationTarget("_onShown",e),this._replaceAnimationTarget("_onHiding",e),this._replaceAnimationTarget("_onHidden",e)},get_popupControlID:function(){return this._popupControlID},set_popupControlID:function(e){this._popupControlID!=e&&(this._popupControlID=e,this.raisePropertyChanged("popupControlID"))},get_PopupControlID:function(){return Sys.Extended.Deprecated("get_PopupControlID()","get_popupControlID()"),this.get_popupControlID()},set_PopupControlID:function(e){Sys.Extended.Deprecated("set_PopupControlID(value)","set_popupControlID(value)"),this.set_popupControlID(e)},get_x:function(){return this._xCoordinate},set_x:function(e){this._xCoordinate!=e&&(this._xCoordinate=e,this.raisePropertyChanged("x"))},get_X:function(){return Sys.Extended.Deprecated("get_X()","get_x()"),this.get_x()},set_X:function(e){Sys.Extended.Deprecated("set_X(value)","set_x(value)"),this.set_x(e)},get_y:function(){return this._yCoordinate},set_y:function(e){this._yCoordinate!=e&&(this._yCoordinate=e,this.raisePropertyChanged("y"))},get_Y:function(){return Sys.Extended.Deprecated("get_Y()","get_y()"),this.get_y()},set_Y:function(e){Sys.Extended.Deprecated("set_Y(value)","set_y(value)"),this.set_y(e)},get_popupDragHandleControlID:function(){return this._popupDragHandleControlID},set_popupDragHandleControlID:function(e){this._popupDragHandleControlID!=e&&(this._popupDragHandleControlID=e,this.raisePropertyChanged("popupDragHandleControlID"))},get_PopupDragHandleControlID:function(){return Sys.Extended.Deprecated("get_PopupDragHandleControlID()","get_popupDragHandleControlID()"),this.get_popupDragHandleControlID()},set_PopupDragHandleControlID:function(e){Sys.Extended.Deprecated("set_PopupDragHandleControlID(value)","set_popupDragHandleControlID(value)"),this.set_popupDragHandleControlID(e)},get_backgroundCssClass:function(){return this._backgroundCssClass},set_backgroundCssClass:function(e){this._backgroundCssClass!=e&&(this._backgroundCssClass=e,this.raisePropertyChanged("backgroundCssClass"))},get_BackgroundCssClass:function(){return Sys.Extended.Deprecated("get_BackgroundCssClass()","get_backgroundCssClass()"),this.get_backgroundCssClass()},set_BackgroundCssClass:function(e){Sys.Extended.Deprecated("set_BackgroundCssClass(value)","set_backgroundCssClass(value)"),this.set_backgroundCssClass(e)},get_dropShadow:function(){return this._dropShadow},set_dropShadow:function(e){this._dropShadow!=e&&(this._dropShadow=e,this.raisePropertyChanged("dropShadow"))},get_DropShadow:function(){return Sys.Extended.Deprecated("get_DropShadow()","get_dropShadow()"),this.get_dropShadow()},set_DropShadow:function(e){Sys.Extended.Deprecated("set_DropShadow(value)","set_dropShadow(value)"),this.set_dropShadow(e)},get_drag:function(){return this._drag},set_drag:function(e){this._drag!=e&&(this._drag=e,this.raisePropertyChanged("drag"))},get_Drag:function(){return Sys.Extended.Deprecated("get_Drag()","get_drag()"),this.get_drag()},set_Drag:function(e){Sys.Extended.Deprecated("set_Drag(value)","set_drag(value)"),this.set_drag(e)},get_okControlID:function(){return this._okControlID},set_okControlID:function(e){this._okControlID!=e&&(this._okControlID=e,this.raisePropertyChanged("okControlID"))},get_OkControlID:function(){return Sys.Extended.Deprecated("get_OkControlID()","get_okControlID()"),this.get_okControlID()},set_OkControlID:function(e){Sys.Extended.Deprecated("set_OkControlID(value)","set_okControlID(value)"),this.set_okControlID(e)},get_cancelControlID:function(){return this._cancelControlID},set_cancelControlID:function(e){this._cancelControlID!=e&&(this._cancelControlID=e,this.raisePropertyChanged("cancelControlID"))},get_CancelControlID:function(){return Sys.Extended.Deprecated("get_CancelControlID()","get_cancelControlID()"),this.get_cancelControlID()},set_CancelControlID:function(e){Sys.Extended.Deprecated("set_CancelControlID(value)","set_cancelControlID(value)"),this.set_cancelControlID(e)},get_onOkScript:function(){return this._onOkScript},set_onOkScript:function(e){this._onOkScript!=e&&(this._onOkScript=e,this.raisePropertyChanged("onOkScript"))},get_OnOkScript:function(){return Sys.Extended.Deprecated("get_OnOkScript()","get_onOkScript()"),this.get_onOkScript()},set_OnOkScript:function(e){Sys.Extended.Deprecated("set_OnOkScript(value)","set_onOkScript(value)"),this.set_onOkScript(e)},get_onCancelScript:function(){return this._onCancelScript},set_onCancelScript:function(e){this._onCancelScript!=e&&(this._onCancelScript=e,this.raisePropertyChanged("onCancelScript"))},get_OnCancelScript:function(){return Sys.Extended.Deprecated("get_OnCancelScript()","get_onCancelScript()"),this.get_onCancelScript()},set_OnCancelScript:function(e){Sys.Extended.Deprecated("set_OnCancelScript(value)","set_onCancelScript(value)"),this.set_onCancelScript(e)},get_repositionMode:function(){return this._repositionMode},set_repositionMode:function(e){this._repositionMode!==e&&(this._repositionMode=e,this.raisePropertyChanged("repositionMode"))},get_onShowing:function(){return this._onShowing.get_json()},set_onShowing:function(e){this._onShowing.set_json(e),this.raisePropertyChanged("onShowing")},get_OnShowing:function(){return Sys.Extended.Deprecated("get_OnShowing()","get_onShowing()"),this.get_onShowing()},set_OnShowing:function(e){Sys.Extended.Deprecated("set_OnShowing(value)","set_onShowing(value)"),this.set_onShowing(e)},get_onShown:function(){return this._onShown.get_json()},set_onShown:function(e){this._onShown.set_json(e),this.raisePropertyChanged("onShown")},get_OnShown:function(){return Sys.Extended.Deprecated("get_OnShown()","get_onShown()"),this.get_onShown()},set_OnShown:function(e){Sys.Extended.Deprecated("set_OnShown(value)","set_onShown(value)"),this.set_onShown(e)},get_onHiding:function(){return this._onHiding.get_json()},set_onHiding:function(e){this._onHiding.set_json(e),this.raisePropertyChanged("onHiding")},get_OnHiding:function(){return Sys.Extended.Deprecated("get_OnHiding()","get_onHiding()"),this.get_onHiding()},set_OnHiding:function(e){Sys.Extended.Deprecated("set_OnHiding(value)","set_onHiding(value)"),this.set_onHiding(e)},get_onHidden:function(){return this._onHidden.get_json()},set_onHidden:function(e){this._onHidden.set_json(e),this.raisePropertyChanged("onHidden")},get_OnHidden:function(){return Sys.Extended.Deprecated("get_OnHidden()","get_onHidden()"),this.get_onHidden()},set_OnHidden:function(e){Sys.Extended.Deprecated("set_OnHidden(value)","set_onHidden(value)"),this.set_onHidden(e)},add_showing:function(e){this.get_events().addHandler("showing",e)},remove_showing:function(e){this.get_events().removeHandler("showing",e)},raise_showing:function(e){var t=this.get_events().getHandler("showing");t&&t(this,e)},raiseShowing:function(e){Sys.Extended.Deprecated("raiseShowing(eventArgs)","raise_showing(eventArgs)"),this.raise_showing(e)},add_shown:function(e){this.get_events().addHandler("shown",e)},remove_shown:function(e){this.get_events().removeHandler("shown",e)},raise_shown:function(e){var t=this.get_events().getHandler("shown");t&&t(this,e)},raiseShown:function(e){Sys.Extended.Deprecated("raiseShown(eventArgs)","raise_shown(eventArgs)"),this.raise_shown(e)},add_hiding:function(e){this.get_events().addHandler("hiding",e)},remove_hiding:function(e){this.get_events().removeHandler("hiding",e)},raise_hiding:function(e){var t=this.get_events().getHandler("hiding");t&&t(this,e)},raiseHiding:function(e){Sys.Extended.Deprecated("raiseHiding(eventArgs)","raise_hiding(eventArgs)"),this.raise_hiding(e)},add_hidden:function(e){this.get_events().addHandler("hidden",e)},remove_hidden:function(e){this.get_events().removeHandler("hidden",e)},raise_hidden:function(e){var t=this.get_events().getHandler("hidden");t&&t(this,e)},raiseHidden:function(e){Sys.Extended.Deprecated("raiseHidden(eventArgs)","raise_hidden(eventArgs)"),this.raise_hidden(e)}},Sys.Extended.UI.ModalPopupBehavior.registerClass("Sys.Extended.UI.ModalPopupBehavior",Sys.Extended.UI.DynamicPopulateBehaviorBase),Sys.Extended.UI.ModalPopupBehavior.invokeViaServer=function(e,t){var n=$find(e);n&&(t?n.show():n.hide())},Sys.Extended.UI.ModalPopupBehavior.popups=[];