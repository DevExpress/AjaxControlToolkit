Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.DynamicPopulateBehavior=function(e){Sys.Extended.UI.DynamicPopulateBehavior.initializeBase(this,[e]),this._servicePath=location.pathname,this._serviceMethod=null,this._contextKey=null,this._cacheDynamicResults=!1,this._populateTriggerID=null,this._setUpdatingCssClass=null,this._clearDuringUpdate=!0,this._customScript=null,this._clickHandler=null,this._callID=0,this._currentCallID=-1,this._populated=!1},Sys.Extended.UI.DynamicPopulateBehavior.prototype={initialize:function(){if(Sys.Extended.UI.DynamicPopulateBehavior.callBaseMethod(this,"initialize"),$common.prepareHiddenElementForATDeviceUpdate(),this._populateTriggerID){var e=$get(this._populateTriggerID);e&&(this._clickHandler=Function.createDelegate(this,this._onPopulateTriggerClick),$addHandler(e,"click",this._clickHandler))}},dispose:function(){if(this._populateTriggerID&&this._clickHandler){var e=$get(this._populateTriggerID);e&&$removeHandler(e,"click",this._clickHandler),this._populateTriggerID=null,this._clickHandler=null}Sys.Extended.UI.DynamicPopulateBehavior.callBaseMethod(this,"dispose")},populate:function(contextKey){if(contextKey&&(this._contextKey=contextKey),!this._populated||!this._cacheDynamicResults){if(this._currentCallID==-1){var eventArgs=new Sys.CancelEventArgs;if(this.raise_populating(eventArgs),eventArgs.get_cancel())return;this._setUpdating(!0)}if(this._customScript){var scriptResult=eval(this._customScript);this._setTargetHtml(scriptResult),this._setUpdating(!1)}else{if(this._currentCallID=++this._callID,!this._servicePath||!this._serviceMethod)return;Sys.Net.WebServiceProxy.invoke(this._servicePath,this._serviceMethod,!1,{contextKey:contextKey?contextKey:this._contextKey},Function.createDelegate(this,this._onMethodComplete),Function.createDelegate(this,this._onMethodError),this._currentCallID),$common.updateFormToRefreshATDeviceBuffer()}}},_onMethodComplete:function(e,t,s){t==this._currentCallID&&(this._setTargetHtml(e),this._setUpdating(!1))},_onMethodError:function(e,t,s){t==this._currentCallID&&(e.get_timedOut()?this._setTargetHtml(Sys.Extended.UI.Resources.DynamicPopulate_WebServiceTimeout):this._setTargetHtml(String.format(Sys.Extended.UI.Resources.DynamicPopulate_WebServiceError,e.get_statusCode())),this._setUpdating(!1))},_onPopulateTriggerClick:function(){this.populate(this._contextKey)},_setUpdating:function(e){this.setStyle(e),e||(this._currentCallID=-1,this._populated=!0,this.raise_populated(this,Sys.EventArgs.Empty))},_setTargetHtml:function(e){var t=this.get_element();t&&("INPUT"==t.tagName?t.value=e:t.innerHTML=e)},setStyle:function(e){var t=this.get_element();this._setUpdatingCssClass&&(e?(this._oldCss=t.className,t.className=this._setUpdatingCssClass):(t.className=this._oldCss,this._oldCss=null)),e&&this._clearDuringUpdate&&this._setTargetHtml("")},get_clearContentsDuringUpdate:function(){return this._clearDuringUpdate},set_clearContentsDuringUpdate:function(e){this._clearDuringUpdate!=e&&(this._clearDuringUpdate=e,this.raisePropertyChanged("clearContentsDuringUpdate"))},get_ClearContentsDuringUpdate:function(){return Sys.Extended.Deprecated("get_ClearContentsDuringUpdate","get_clearContentsDuringUpdate"),this.get_clearContentsDuringUpdate()},set_ClearContentsDuringUpdate:function(e){Sys.Extended.Deprecated("set_ClearContentsDuringUpdate","set_clearContentsDuringUpdate"),this.set_clearContentsDuringUpdate(e)},get_contextKey:function(){return this._contextKey},set_contextKey:function(e){this._contextKey!=e&&(this._contextKey=e,this.raisePropertyChanged("contextKey"))},get_ContextKey:function(){return Sys.Extended.Deprecated("get_ContextKey","get_contextKey"),this.get_contextKey()},set_ContextKey:function(e){Sys.Extended.Deprecated("set_ContextKey","set_contextKey"),this.set_contextKey(e)},get_populateTriggerID:function(){return this._populateTriggerID},set_populateTriggerID:function(e){this._populateTriggerID!=e&&(this._populateTriggerID=e,this.raisePropertyChanged("populateTriggerID"))},get_PopulateTriggerID:function(){return Sys.Extended.Deprecated("get_PopulateTriggerID","get_populateTriggerID"),this.get_populateTriggerID()},set_PopulateTriggerID:function(e){Sys.Extended.Deprecated("set_PopulateTriggerID","set_populateTriggerID"),this.set_populateTriggerID(e)},get_servicePath:function(){return this._servicePath},set_servicePath:function(e){this._servicePath!=e&&(this._servicePath=e,this.raisePropertyChanged("servicePath"))},get_ServicePath:function(){return Sys.Extended.Deprecated("get_ServicePath","get_servicePath"),this.get_servicePath()},set_ServicePath:function(e){Sys.Extended.Deprecated("set_ServicePath","set_servicePath"),this.set_servicePath(e)},get_serviceMethod:function(){return this._serviceMethod},set_serviceMethod:function(e){this._serviceMethod!=e&&(this._serviceMethod=e,this.raisePropertyChanged("serviceMethod"))},get_ServiceMethod:function(){return Sys.Extended.Deprecated("get_ServiceMethod","get_serviceMethod"),this.get_serviceMethod()},set_ServiceMethod:function(e){Sys.Extended.Deprecated("set_ServiceMethod","set_serviceMethod"),this.set_serviceMethod(e)},get_cacheDynamicResults:function(){return this._cacheDynamicResults},set_cacheDynamicResults:function(e){this._cacheDynamicResults!=e&&(this._cacheDynamicResults=e,this.raisePropertyChanged("cacheDynamicResults"))},get_updatingCssClass:function(){return this._setUpdatingCssClass},set_updatingCssClass:function(e){this._setUpdatingCssClass!=e&&(this._setUpdatingCssClass=e,this.raisePropertyChanged("updatingCssClass"))},get_UpdatingCssClass:function(){return Sys.Extended.Deprecated("get_UpdatingCssClass","get_updatingCssClass"),this.get_updatingCssClass()},set_UpdatingCssClass:function(e){Sys.Extended.Deprecated("set_UpdatingCssClass","set_updatingCssClass"),this.set_updatingCssClass(e)},get_customScript:function(){return this._customScript},set_customScript:function(e){this._customScript!=e&&(this._customScript=e,this.raisePropertyChanged("customScript"))},get_CustomScript:function(){return Sys.Extended.Deprecated("get_CustomScript","get_customScript"),this.get_customScript()},set_CustomScript:function(e){Sys.Extended.Deprecated("set_CustomScript","set_customScript"),this.set_customScript(e)},add_populating:function(e){this.get_events().addHandler("populating",e)},remove_populating:function(e){this.get_events().removeHandler("populating",e)},raise_populating:function(e){var t=this.get_events().getHandler("populating");t&&t(this,e)},raisePopulating:function(e){Sys.Extended.Deprecated("raisePopulating(eventArgs)","raise_populating(eventArgs)"),this.raise_populating(e)},add_populated:function(e){this.get_events().addHandler("populated",e)},remove_populated:function(e){this.get_events().removeHandler("populated",e)},raise_populated:function(e){var t=this.get_events().getHandler("populated");t&&t(this,e)},raisePopulated:function(e){Sys.Extended.Deprecated("raisePopulated(eventArgs)","raise_populated(eventArgs)"),this.raise_populated(e)}},Sys.Extended.UI.DynamicPopulateBehavior.registerClass("Sys.Extended.UI.DynamicPopulateBehavior",Sys.Extended.UI.BehaviorBase);