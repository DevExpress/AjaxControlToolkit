Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.FilteredTextBoxBehavior=function(e){Sys.Extended.UI.FilteredTextBoxBehavior.initializeBase(this,[e]),this._keypressHandler=null,this._changeHandler=null,this._intervalID=null,this._filterType=Sys.Extended.UI.FilterTypes.Custom,this._filterMode=Sys.Extended.UI.FilterModes.ValidChars,this._validChars=null,this._invalidChars=null,this._filterInterval=250,this.charTypes={},this.charTypes.LowercaseLetters="abcdefghijklmnopqrstuvwxyz",this.charTypes.UppercaseLetters="ABCDEFGHIJKLMNOPQRSTUVWXYZ",this.charTypes.Numbers="0123456789"},Sys.Extended.UI.FilteredTextBoxBehavior.prototype={initialize:function(){Sys.Extended.UI.FilteredTextBoxBehavior.callBaseMethod(this,"initialize");var e=this.get_element();this._keypressHandler=Function.createDelegate(this,this._onkeypress),$addHandler(e,"keypress",this._keypressHandler),this._changeHandler=Function.createDelegate(this,this._onchange),$addHandler(e,"change",this._changeHandler);var t=Function.createDelegate(this,this._intervalCallback);this._intervalID=window.setInterval(t,this._filterInterval)},dispose:function(){var e=this.get_element();$removeHandler(e,"keypress",this._keypressHandler),this._keypressHandler=null,$removeHandler(e,"change",this._changeHandler),this._changeHandler=null,window.clearInterval(this._intervalID),Sys.Extended.UI.FilteredTextBoxBehavior.callBaseMethod(this,"dispose")},_getValidChars:function(){if(this._validChars)return this._validChars;this._validChars="";for(type in this.charTypes){var e=Sys.Extended.UI.FilterTypes.toString(this._filterType);e.indexOf(type)!=-1&&(this._validChars+=this.charTypes[type])}return this._validChars},_getInvalidChars:function(){return this._invalidChars||(this._invalidChars=this.charTypes.Custom),this._invalidChars},_onkeypress:function(e){var t;if((0!=e.rawEvent.charCode&&(e.rawEvent.keyCode!=e.rawEvent.which||void 0!=e.rawEvent.charCode)||e.rawEvent.keyCode!=Sys.UI.Key.pageUp&&e.rawEvent.keyCode!=Sys.UI.Key.pageDown&&e.rawEvent.keyCode!=Sys.UI.Key.up&&e.rawEvent.keyCode!=Sys.UI.Key.down&&e.rawEvent.keyCode!=Sys.UI.Key.left&&e.rawEvent.keyCode!=Sys.UI.Key.right&&e.rawEvent.keyCode!=Sys.UI.Key.home&&e.rawEvent.keyCode!=Sys.UI.Key.end&&46!=e.rawEvent.keyCode)&&!e.ctrlKey){if("keyIdentifier"in e.rawEvent){if(e.rawEvent.ctrlKey||e.rawEvent.altKey||e.rawEvent.metaKey)return;if(t=e.rawEvent.charCode,63272==t)return}else t=e.charCode;if(t&&t>=32){var r=String.fromCharCode(t);this._processKey(r)||e.preventDefault()}}},_processKey:function(e){var t="",r=!1;this._filterMode==Sys.Extended.UI.FilterModes.ValidChars?(t=this._getValidChars(),r=t&&t.length>0&&t.indexOf(e)==-1):(t=this._getInvalidChars(),r=t&&t.length>0&&t.indexOf(e)>-1);var s=new Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs(e,Sys.Extended.UI.TextBoxWrapper.get_Wrapper(this.get_element()).get_Value(),r);return this.raise_processKey(s),!!s.get_allowKey()||(this.raise_filtered(new Sys.Extended.UI.FilteredTextBoxEventArgs(e)),!1)},_onchange:function(){for(var e=Sys.Extended.UI.TextBoxWrapper.get_Wrapper(this.get_element()),t=e.get_Value()||"",r=new Sys.StringBuilder,s=0;s<t.length;s++){var i=t.substring(s,s+1);this._processKey(i)&&r.append(i)}e.get_Value()!=r.toString()&&e.set_Value(r.toString())},_intervalCallback:function(){this._changeHandler()},get_validChars:function(){return this.charTypes.Custom},set_validChars:function(e){null==this._validChars&&this.charTypes.Custom==e||(this.charTypes.Custom=e,this._validChars=null,this.raisePropertyChanged("validChars"))},get_ValidChars:function(){return Sys.Extended.Deprecated("get_ValidChars","get_validChars"),this.get_validChars()},set_ValidChars:function(e){Sys.Extended.Deprecated("set_ValidChars","set_validChars"),this.set_validChars(e)},get_invalidChars:function(){return this.charTypes.Custom},set_invalidChars:function(e){null==this._invalidChars&&this.charTypes.Custom==e||(this.charTypes.Custom=e,this._invalidChars=null,this.raisePropertyChanged("invalidChars"))},get_InvalidChars:function(){return Sys.Extended.Deprecated("get_InvalidChars","get_invalidChars"),this.get_invalidChars()},set_InvalidChars:function(e){Sys.Extended.Deprecated("set_InvalidChars","set_invalidChars"),this.set_invalidChars(e)},get_filterType:function(){return this._filterType},set_filterType:function(e){null==this._validChars&&this._filterType==e||(this._filterType=e,this._validChars=null,this.raisePropertyChanged("filterType"))},get_FilterType:function(){return Sys.Extended.Deprecated("get_FilterType","get_filterType"),this.get_filterType()},set_FilterType:function(e){Sys.Extended.Deprecated("set_FilterType","set_filterType"),this.set_filterType(e)},get_filterMode:function(){return this._filterMode},set_filterMode:function(e){null==this._validChars&&null==this._invalidChars&&this._filterMode==e||(this._filterMode=e,this._validChars=null,this._invalidChars=null,this.raisePropertyChanged("filterMode"))},get_FilterMode:function(){return Sys.Extended.Deprecated("get_FilterMode","get_filterMode"),this.get_filterMode()},set_FilterMode:function(e){Sys.Extended.Deprecated("set_FilterMode","set_filterMode"),this.set_filterMode(e)},get_filterInterval:function(){return this._filterInterval},set_filterInterval:function(e){this._filterInterval!=e&&(this._filterInterval=e,this.raisePropertyChanged("filterInterval"))},get_FilterInterval:function(){return Sys.Extended.Deprecated("get_FilterInterval","get_filterInterval"),this.get_filterInterval()},set_FilterInterval:function(e){Sys.Extended.Deprecated("set_FilterInterval","set_filterInterval"),this.set_filterInterval(e)},add_processKey:function(e){this.get_events().addHandler("processKey",e)},remove_processKey:function(e){this.get_events().removeHandler("processKey",e)},raise_processKey:function(e){var t=this.get_events().getHandler("processKey");t&&t(this,e)},raiseProcessKey:function(e){Sys.Extended.Deprecated("raiseProcessKey(eventArgs)","raise_processKey(eventArgs)"),this.raise_processKey(e)},add_filtered:function(e){this.get_events().addHandler("filtered",e)},remove_filtered:function(e){this.get_events().removeHandler("filtered",e)},raise_filtered:function(e){var t=this.get_events().getHandler("filtered");t&&t(this,e)},raiseFiltered:function(e){Sys.Extended.Deprecated("raiseFiltered(eventArgs)","raise_filtered(eventArgs)"),this.raise_filtered(e)}},Sys.Extended.UI.FilteredTextBoxBehavior.registerClass("Sys.Extended.UI.FilteredTextBoxBehavior",Sys.Extended.UI.BehaviorBase),Sys.Extended.UI.FilterTypes=function(){throw Error.invalidOperation()},Sys.Extended.UI.FilterTypes.prototype={Custom:1,Numbers:2,UppercaseLetters:4,LowercaseLetters:8},Sys.Extended.UI.FilterTypes.registerEnum("Sys.Extended.UI.FilterTypes",!0),Sys.Extended.UI.FilterModes=function(){throw Error.invalidOperation()},Sys.Extended.UI.FilterModes.prototype={ValidChars:1,InvalidChars:2},Sys.Extended.UI.FilterModes.registerEnum("Sys.Extended.UI.FilterModes",!0),Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs=function(e,t,r){Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs.initializeBase(this),this._key=e,this._text=t,this._shouldFilter=r,this._allowKey=!r},Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs.prototype={get_key:function(){return this._key},get_text:function(){return this._text},get_shouldFilter:function(){return this._shouldFilter},get_allowKey:function(){return this._allowKey},set_allowKey:function(e){this._allowKey=e}},Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs.registerClass("Sys.Extended.UI.FilteredTextBoxProcessKeyEventArgs",Sys.EventArgs),Sys.Extended.UI.FilteredTextBoxEventArgs=function(e){Sys.Extended.UI.FilteredTextBoxEventArgs.initializeBase(this),this._key=e},Sys.Extended.UI.FilteredTextBoxEventArgs.prototype={get_key:function(){return this._key}},Sys.Extended.UI.FilteredTextBoxEventArgs.registerClass("Sys.Extended.UI.FilteredTextBoxEventArgs",Sys.EventArgs);