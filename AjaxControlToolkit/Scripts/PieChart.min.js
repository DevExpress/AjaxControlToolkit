Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.PieChart=function(t){Sys.Extended.UI.PieChart.initializeBase(this,[t]);var e=this.get_id();e=e.replace("_ctl00",""),this._parentDiv=document.getElementById(e+"__ParentDiv"),this._chartWidth="300",this._chartHeight="300",this._chartTitle="",this._pieChartClientValues=null,this._theme="PieChart",this._chartTitleColor="",this.charLength=3.5},Sys.Extended.UI.PieChart.prototype={initialize:function(){if(Sys.Extended.UI.PieChart.callBaseMethod(this,"initialize"),!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))throw"Current version of browser does not support SVG.";this.generatePieChart()},dispose:function(){Sys.Extended.UI.PieChart.callBaseMethod(this,"dispose")},generatePieChart:function(){var t=parseInt(this._chartWidth)>parseInt(this._chartHeight)?(parseInt(this._chartHeight)-10)/3:(parseInt(this._chartWidth)-10)/3,e=parseInt(this._chartWidth)/2,i=parseInt(this._chartHeight)/2.25,a=String.format('<?xml-stylesheet type="text/css" href="{0}.css"?>',this._theme);a=String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{0}" height="{1}" style="position: relative; display: block;">',this._chartWidth,this._chartHeight),a+="<defs>",a+=String.format('<radialGradient gradientUnits="userSpaceOnUse" r="{0}" fy="{1}" fx="{2}" cy="{1}" cx="{2}">',t,e,i),a+='<stop offset="0%" id="RadialGradient1"></stop>',a+='<stop offset="25%" id="RadialGradient2"></stop>',a+='<stop offset="100%" id="RadialGradient3"></stop></RadialGradient>',a+="</defs>",a+=String.format('<rect id="ChartBackGround" width="{0}" height="{1}" style="opacity: 0"/>',this._chartWidth,this._chartHeight),a+=String.format('<text x="{0}" y="{1}" id="ChartTitle" style="fill:{3}">{2}</text>',parseInt(this._chartWidth)/2-this._chartTitle.length*this.charLength,5*parseInt(this._chartHeight)/100,this._chartTitle,this._chartTitleColor);for(var h=82*parseInt(this._chartHeight)/100+5,r=7.5,s=7.5,n=5,l=0,o=0;o<this._pieChartClientValues.length;o++)l+=this._pieChartClientValues[o].Category.length;var C=Math.round(5*l/2)+Math.round((r+2*n)*this._pieChartClientValues.length),_=!1;C>parseInt(this._chartWidth)/2&&(C/=2,_=!0),a+="<g>",a+=String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="LegendArea" stroke=""></path>',40*parseInt(this._chartWidth)/100-C/2,h,40*parseInt(this._chartWidth)/100+C/2,Math.round(97.5*parseInt(this._chartHeight)/100));for(var p=40*parseInt(this._chartWidth)/100-C/2+5+r+n,c=p,d=40*parseInt(this._chartWidth)/100-C/2+5,g=d,o=0;o<this._pieChartClientValues.length;o++)_&&o==Math.round(this._pieChartClientValues.length/2)&&(p=40*parseInt(this._chartWidth)/100-C/2+5+r+n,c=p,d=40*parseInt(this._chartWidth)/100-C/2+5,g=d,h=89*parseInt(this._chartHeight)/100+5,_=!1),d=g,p=c,a+=String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="Legend{4}" style="stroke:{6};fill:{5}"></path>',d,h+s,d+r,h+15,o+1,this._pieChartClientValues[o].PieChartValueColor,this._pieChartClientValues[o].PieChartValueStrokeColor),a+=String.format('<text x="{0}" y="{1}" id="LegendText">{2}</text>',p,h+15,this._pieChartClientValues[o].Category),this._pieChartClientValues[o].Category.length>10?(g=d+5.5*this._pieChartClientValues[o].Category.length+r+2*n,c=p+5.5*this._pieChartClientValues[o].Category.length+r+2*n):(g=g+6*this._pieChartClientValues[o].Category.length+r+2*n,c=c+6*this._pieChartClientValues[o].Category.length+r+2*n);a+="</g>";for(var u=0,f=0,V=0,y=0,I=0,S=0,m=0,x=0,v=e,P=i-t,T=e,M=i-t,o=0;o<this._pieChartClientValues.length;o++)f+=Math.abs(parseFloat(this._pieChartClientValues[o].Data));this._parentDiv.innerHTML=a,this.drawSegments(this,0,u,f,t,V,y,I,e,S,i,m,T,M,v,P,x)},drawSegments:function(t,e,i,a,h,r,s,n,l,o,C,_,p,c,d,g,u){var f=Math.abs(parseFloat(t._pieChartClientValues[e].Data));i+=f,r=i/a*360,s=r*(Math.PI/180),n=(i-f/2)/a*360,n*=Math.PI/180,o=parseFloat(Math.sin(s)*h),_=parseFloat(Math.cos(s)*h),p=parseFloat(Math.sin(n)*(h+10)),c=parseFloat(Math.cos(n)*(h+10)),p=l+p>l?l+p:l+p-t._pieChartClientValues[e].Data.toString().length*this.charLength,c=C+-1*c<C?C+-1*c:C+-1*c+10,u=f>a/2?1:0,t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<g><path id="Segment{8}" d="M{0} {1} A {2} {2} 0 {3},1 {4} {5} L {6} {7} z" style="stroke:{10};fill:{9};"></path>',d,g,h,u,l+o,C+-1*_,l,C,e+1,t._pieChartClientValues[e].PieChartValueColor,t._pieChartClientValues[e].PieChartValueStrokeColor)+String.format('<text fill="#000000" style="font: 11px Arial,Helvetica,sans-serif" fill-opacity="1" y="{1}" x="{0}">{2}</text></g>',p,c,t._pieChartClientValues[e].Data)+"</svg>",d=l+o,g=C+-1*_,e++,e<t._pieChartClientValues.length&&setTimeout(function(){t.drawSegments(t,e,i,a,h,r,s,n,l,o,C,_,p,c,d,g,u)},400)},get_chartWidth:function(){return this._chartWidth},set_chartWidth:function(t){this._chartWidth=t},get_chartHeight:function(){return this._chartHeight},set_chartHeight:function(t){this._chartHeight=t},get_chartTitle:function(){return this._chartTitle},set_chartTitle:function(t){this._chartTitle=t},get_pieChartClientValues:function(){return this._pieChartClientValues},set_pieChartClientValues:function(t){this._pieChartClientValues=t},get_PieChartClientValues:function(){return Sys.Extended.Deprecated("get_PieChartClientValues()","get_pieChartClientValues()"),this.get_pieChartClientValues()},set_PieChartClientValues:function(t){Sys.Extended.Deprecated("set_PieChartClientValues(value)","set_pieChartClientValues(value)"),this.set_pieChartClientValues(t)},get_theme:function(){return this._theme},set_theme:function(t){this._theme=t},get_chartTitleColor:function(){return this._chartTitleColor},set_chartTitleColor:function(t){this._chartTitleColor=t}},Sys.Extended.UI.PieChart.registerClass("Sys.Extended.UI.PieChart",Sys.Extended.UI.ControlBase);