Type.registerNamespace("Sys.Extended.UI"),Sys.Extended.UI.LineChart=function(t){Sys.Extended.UI.LineChart.initializeBase(this,[t]);var e=this.get_id();e=e.replace("_ctl00",""),this._parentDiv=document.getElementById(e).children[0],this._displayValues=!0,this._chartWidth="300",this._chartHeight="300",this._chartTitle="",this._categoriesAxis="",this._series=null,this._chartType=Sys.Extended.UI.LineChartType.Basic,this._theme="LineChart",this._valueAxisLines=9,this._chartTitleColor="",this._valueAxisLineColor="",this._categoryAxisLineColor="",this._baseLineColor="",this._tooltipBackgroundColor="#ffffff",this._tooltipFontColor="#0E426C",this._tooltipBorderColor="#B85B3E",this._areaDataLabel="",this.yMax=0,this.yMin=0,this.roundedTickRange=0,this.startX=0,this.startY=0,this.endX=0,this.endY=0,this.xInterval=0,this.yInterval=0,this.arrXAxis,this.arrXAxisLength=0,this.charLength=3.5,this.arrCombinedData=null,this._toolTipDiv},Sys.Extended.UI.LineChart.prototype={initialize:function(){if(Sys.Extended.UI.LineChart.callBaseMethod(this,"initialize"),!document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#Image","1.1"))throw"Browser does not support SVG.";0==this._valueAxisLines&&(this._valueAxisLines=9),this.generateTooltipDiv(),this.generateLineChart()},dispose:function(){Sys.Extended.UI.LineChart.callBaseMethod(this,"dispose")},generateTooltipDiv:function(){this._divTooltip=$common.createElementFromTemplate({nodeName:"div",properties:{id:this.get_id()+"_tooltipDiv",style:{position:"absolute",backgroundColor:this._tooltipBackgroundColor,borderStyle:"solid",borderWidth:"5px",borderColor:this._tooltipBorderColor,left:"0px",top:"0px",color:this._tooltipFontColor,visibility:"hidden",zIndex:Sys.Extended.UI.zIndex.LineChartTooltip,padding:"10px"}}},this._parentDiv)},generateLineChart:function(){this.arrXAxis=this._categoriesAxis.split(","),this.arrXAxisLength=this.arrXAxis.length,this.calculateMinMaxValues(),this.calculateInterval(),this.calculateValueAxis();var t=this.initializeSVG();t+=String.format('<text x="{0}" y="{1}" id="ChartTitle" style="fill:{3}">{2}</text>',parseInt(this._chartWidth)/2-this._chartTitle.length*this.charLength,5*parseInt(this._chartHeight)/100,this._chartTitle,this._chartTitleColor),t+=this.drawBackgroundHorizontalLines(),t+=this.drawBackgroundVerticalLines(),t+=this.drawBaseLines(),t+=this.drawLegendArea(),t+=this.drawAxisValues(),this._parentDiv.innerHTML=this._parentDiv.innerHTML+t,this.drawLines()},calculateInterval:function(){this.startX=10*this._chartWidth/100+.5,this.endX=parseInt(this._chartWidth)-4.5,this.yMin>=0?this.startY=Math.round(parseInt(this._chartHeight)-24*parseInt(this._chartHeight)/100)+.5:this.startY=Math.round(parseInt(this._chartHeight)-12*parseInt(this._chartHeight)/100)/2+.5,this.yInterval=this.startY/(this._valueAxisLines+1)},calculateMinMaxValues:function(t){var e,i,r;if(this._chartType==Sys.Extended.UI.LineChartType.Basic)for(var a=0;a<this._series.length;a++){r=new Array;for(var s=0;s<this._series[a].Data.length;s++)r[s]=this._series[a].Data[s];e=Math.max.apply(null,r),i=Math.min.apply(null,r),0==a?(this.yMax=e,this.yMin=i):(e>this.yMax&&(this.yMax=e),i<this.yMin&&(this.yMin=i))}else{this.arrCombinedData=null;for(var a=0;a<this._series.length;a++){r=new Array;for(var s=0;s<this._series[a].Data.length;s++)r[s]=this._series[a].Data[s];if(null==this.arrCombinedData)this.arrCombinedData=r;else for(s=0;s<this._series[a].Data.length;s++)this.arrCombinedData[s]=parseFloat(this.arrCombinedData[s])+parseFloat(r[s])}for(var a=0;a<this._series.length;a++)i=Math.min.apply(null,this._series[a].Data),0==a?this.yMin=i:i<this.yMin&&(this.yMin=i);this.yMax=Math.max.apply(null,this.arrCombinedData)}this.yMin<0&&(this._valueAxisLines=Math.round(this._valueAxisLines/2))},calculateValueAxis:function(){var t,e,i,r;t=this.yMin>=0?this.yMax:this.yMax>Math.abs(this.yMin)?this.yMax:Math.abs(this.yMin),e=t/(this._valueAxisLines-1),e<1?this.roundedTickRange=e.toFixed(1):(i=Math.ceil(Math.log(e)/Math.log(10)-1),r=Math.pow(10,i),this.roundedTickRange=Math.ceil(e/r)*r),0==this.roundedTickRange&&(this.roundedTickRange=1),this.startX=this.startX+(10*this.roundedTickRange*this._valueAxisLines/10).toString().length*this.charLength},drawBackgroundHorizontalLines:function(){for(var t="",e=1;e<=this._valueAxisLines;e++)t+=String.format('<path d="M{0} {2} {1} {2}" id="HorizontalLine" style="stroke:{3}"></path>',this.startX,this.endX,this.startY-this.yInterval*e,this._categoryAxisLineColor);if(this.yMin<0)for(var e=1;e<=this._valueAxisLines;e++)t+=String.format('<path d="M{0} {2} {1} {2}" id="HorizontalLine" style="stroke:{3}"></path>',this.startX,this.endX,this.startY+this.yInterval*e,this._categoryAxisLineColor);return t},drawBackgroundVerticalLines:function(){var t="";this.xInterval=Math.round((parseInt(this._chartWidth)-this.startX)/this.arrXAxisLength);for(var e=0;e<this.arrXAxisLength;e++)t+=String.format('<path id="VerticalLine" d="M{0} {1} {0} {2}" style="stroke:{3}"></path>',parseInt(this._chartWidth)-5-this.xInterval*e,this.startY-this.yInterval*this._valueAxisLines,this.startY,this._valueAxisLineColor);if(this.yMin<0)for(var e=0;e<this.arrXAxisLength;e++)t+=String.format('<path id="VerticalLine" d="M{0} {1} {0} {2}" style="stroke:{3}"></path>',parseInt(this._chartWidth)-5-this.xInterval*e,this.startY+this.yInterval*this._valueAxisLines,this.startY,this._valueAxisLineColor);return t},drawBaseLines:function(){var t="";t+=String.format('<path d="M{0} {1} {2} {1}" id="BaseLine" style="stroke:{3}"></path>',this.startX,this.startY,this.endX,this._baseLineColor),t+=String.format('<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',this.startX,this.startY-this.yInterval*this._valueAxisLines,this.startY,this._baseLineColor),t+=String.format('<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',this.startX,this.startY,this.startY+4,this._baseLineColor);for(var e=0;e<this.arrXAxisLength;e++)t+=String.format('<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',parseInt(this._chartWidth)-5-this.xInterval*e,this.startY,this.startY+4,this._baseLineColor);for(var e=0;e<=this._valueAxisLines;e++)t+=String.format('<path d="M{0} {2} {1} {2}" id="BaseLine" style="stroke:{3}"></path>',this.startX-4,this.startX,this.startY-this.yInterval*e,this._baseLineColor);if(this.yMin<0){t+=String.format('<path d="M{0} {1} {0} {2}" id="BaseLine" style="stroke:{3}"></path>',this.startX,this.startY+this.yInterval*this._valueAxisLines,this.startY,this._baseLineColor);for(var e=1;e<=this._valueAxisLines;e++)t+=String.format('<path d="M{0} {2} {1} {2}" id="BaseLine" style="stroke:{3}"></path>',this.startX-4,this.startX,this.startY+this.yInterval*e,this._baseLineColor)}return t},drawLegendArea:function(){for(var t="",e=82*parseInt(this._chartHeight)/100+5,i=7.5,r=7.5,a=5,s=0,n=0;n<this._series.length;n++)s+=this._series[n].Name.length;var o=Math.round(5*s/2)+Math.round((i+2*a)*this._series.length),h=!1;o>parseInt(this._chartWidth)/2&&(o/=2,h=!0),t+="<g>",t+=String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="LegendArea" stroke=""></path>',50*parseInt(this._chartWidth)/100-o/2,e,Math.round(50*parseInt(this._chartWidth)/100+5*s)+Math.round((i+2*a)*this._series.length),Math.round(97.5*parseInt(this._chartHeight)/100));for(var l=50*parseInt(this._chartWidth)/100-o/2+5+i+a,d=l,c=50*parseInt(this._chartWidth)/100-o/2+5,u=c,n=0;n<this._series.length;n++)h&&n==Math.round(this._series.length/2)&&(l=50*parseInt(this._chartWidth)/100-o/2+5+i+a,d=l,c=50*parseInt(this._chartWidth)/100-o/2+5,u=c,e=89*parseInt(this._chartHeight)/100+5,h=!1),c=u,l=d,t+=String.format('<path d="M{0} {1} {2} {1} {2} {3} {0} {3} z" id="Legend{4}" style="fill:{5}"></path>',c,e+r,c+i,e+15,n+1,this._series[n].LineColor),t+=String.format('<text x="{0}" y="{1}" id="LegendText">{2}</text>',l,e+15,this._series[n].Name),this._series[n].Name.length>10?(u=c+5*this._series[n].Name.length+i+2*a,d=l+5*this._series[n].Name.length+i+2*a):(u=u+6*this._series[n].Name.length+i+2*a,d=d+6*this._series[n].Name.length+i+2*a);return t+="</g>"},drawAxisValues:function(){for(var t="",e=0,i=0;i<this.arrXAxisLength;i++)e=this.arrXAxis[i].toString().length*this.charLength,t+=String.format('<text id="SeriesAxis" x="{0}" y="{1}" fill-opacity="1">{2}</text>',Math.round(this.startX+this.xInterval*i+50*this.xInterval/100-e),this.startY+Math.round(65*this.yInterval/100),this.arrXAxis[i]);for(var i=0;i<=this._valueAxisLines;i++)t+=String.format('<text id="ValueAxis" x="{0}" y="{1}">{2}</text>',this.startX-5.5*(10*this.roundedTickRange*i/10).toString().length-10,this.startY-this.yInterval*i+3.5,10*this.roundedTickRange*i/10);if(this.yMin<0)for(var i=1;i<=this._valueAxisLines;i++)t+=String.format('<text id="ValueAxis" x="{0}" y="{1}">-{2}</text>',this.startX-5.5*(10*this.roundedTickRange*i/10).toString().length-15,this.startY+this.yInterval*i,10*this.roundedTickRange*i/10);return t},initializeSVG:function(){var t=String.format('<?xml-stylesheet type="text/css" href="{0}.css"?>',this._theme);return t+=String.format('<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="{0}" height="{1}" style="position: relative; display: block;">',this._chartWidth,this._chartHeight),t+="<defs>",t+='<linearGradient gradientTransform="rotate(0)">',t+='<stop offset="0%" id="LinearGradient-Stop1"></stop>',t+='<stop offset="25%" id="LinearGradient-Stop2"></stop>',t+='<stop offset="100%" id="LinearGradient-Stop3"></stop></linearGradient>',t+="</defs>",t+=String.format('<path fill="none" stroke-opacity="1" fill-opacity="1" stroke-linejoin="round" stroke-linecap="square" d="M5 {0} {1} {0} {1} {2} 5 {2} z"/>',1*parseInt(this._chartHeight)/10+5,parseInt(this._chartWidth)-5,parseInt(this._chartHeight)-1*parseInt(this._chartHeight)/10),t+=String.format('<path id="ChartBackGround" stroke="" d="M0 0 {0} 0 {0} {1} 0 {1} z"/>',this._chartWidth,this._chartHeight),t+=String.format('<path fill="#fff" stroke-opacity="1" fill-opacity="0" stroke-linejoin="round" stroke-linecap="square" stroke="" d="M5 {0} {1} {0} {1} {2} 5 {2} z" />',1*parseInt(this._chartHeight)/10+5,parseInt(this._chartWidth)-5,parseInt(this._chartHeight)-1*parseInt(this._chartHeight)/10)},drawLines:function(){var t,e;t=new Array,e=new Array;for(var i=0;i<this._series.length;i++)t[i]=this.startX,e[i]=this.startY;this.animateLines(this,t,e,0,0)},animateLines:function(t,e,i,r,a){for(var s=this.get_displayValues(),n=0;n<t._series.length;n++){if(r=0,t._chartType==Sys.Extended.UI.LineChartType.Stacked)for(k=0;k<=n;k++)r=parseFloat(r)+parseFloat(t._series[k].Data[a]);else r=t._series[n].Data[a];t._chartType==Sys.Extended.UI.LineChartType.Stacked?t.arrCombinedData[a]>0?a>0?t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<path d="M{0} {1} {2} {3}" id="Line{4}" style="fill:{5};stroke:{5}"></path>',e[n],i[n],t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))-7.5,s?r:""):t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))-7.5,s?r:""):a>0?t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<path d="M{0} {1} {2} {3}" id="Line{4}" style="fill:{5};stroke:{5}"></path>',e[n],i[n],t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))+7.5,s?r:""):t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))+7.5,s?r:""):r>0?a>0?t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<path d="M{0} {1} {2} {3}" id="Line{4}" style="fill:{5};stroke:{5}"></path>',e[n],i[n],t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text></svg>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))-7.5,s?r:""):t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text></svg>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))-7.5,s?r:""):a>0?t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<path d="M{0} {1} {2} {3}" id="Line{4}" style="fill:{5};stroke:{5}"></path>',e[n],i[n],t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text></svg>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))+7.5,s?r:""):t._parentDiv.innerHTML=t._parentDiv.innerHTML.replace("</svg>","")+String.format('<circle id="Dot{2}" cx="{0}" cy="{1}" r="4" style="fill:{3};stroke:{3}" onmouseover="ShowTooltip(this, evt, {4}, \'{5}\')" onmouseout="HideTooltip(this, evt)"></circle>',t.startX+t.xInterval*a+t.xInterval/2,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange)),n+1,t._series[n].LineColor,r,t._areaDataLabel)+String.format('<text id="LegendText" x="{0}" y="{1}">{2}</text></svg>',t.startX+t.xInterval*a+20*t.xInterval/100,t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))+7.5,s?r:""),e[n]=t.startX+t.xInterval*a+t.xInterval/2+3,i[n]=t.startY-Math.round(r*(t.yInterval/t.roundedTickRange))}a++,a<t.arrXAxisLength&&setTimeout(function(){t.animateLines(t,e,i,0,a)},400)},get_displayValues:function(){return this._displayValues},set_displayValues:function(t){this._displayValues=t},get_chartWidth:function(){return this._chartWidth},set_chartWidth:function(t){this._chartWidth=t},get_chartHeight:function(){return this._chartHeight},set_chartHeight:function(t){this._chartHeight=t},get_chartTitle:function(){return this._chartTitle},set_chartTitle:function(t){this._chartTitle=t},get_categoriesAxis:function(){return this._categoriesAxis},set_categoriesAxis:function(t){this._categoriesAxis=t},get_clientSeries:function(){return this._series},set_clientSeries:function(t){this._series=t},get_ClientSeries:function(){return Sys.Extended.Deprecated("get_ClientSeries()","get_clientSeries()"),this.get_clientSeries()},set_ClientSeries:function(t){Sys.Extended.Deprecated("set_ClientSeries(value)","set_clientSeries(value)"),this.set_clientSeries(t)},get_chartType:function(){return this._chartType},set_chartType:function(t){this._chartType=t},get_theme:function(){return this._theme},set_theme:function(t){this._theme=t},get_valueAxisLines:function(){return this._valueAxisLines},set_valueAxisLines:function(t){this._valueAxisLines=t},get_chartTitleColor:function(){return this._chartTitleColor},set_chartTitleColor:function(t){this._chartTitleColor=t},get_valueAxisLineColor:function(){return this._valueAxisLineColor},set_valueAxisLineColor:function(t){this._valueAxisLineColor=t},get_categoryAxisLineColor:function(){return this._categoryAxisLineColor},set_categoryAxisLineColor:function(t){this._categoryAxisLineColor=t},get_baseLineColor:function(){return this._baseLineColor},set_baseLineColor:function(t){this._baseLineColor=t},get_tooltipBackgroundColor:function(){return this.tooltipBackgroundColor},set_tooltipBackgroundColor:function(t){this.tooltipBackgroundColor=t},get_tooltipFontColor:function(){return this._tooltipFontColor},set_tooltipFontColor:function(t){this._tooltipFontColor=t},get_tooltipBorderColor:function(){return this._tooltipBorderColor},set_tooltipBorderColor:function(t){this._tooltipBorderColor=t},get_areaDataLabel:function(){return this._areaDataLabel},set_areaDataLabel:function(t){this._areaDataLabel=t}},Sys.Extended.UI.LineChart.registerClass("Sys.Extended.UI.LineChart",Sys.Extended.UI.ControlBase),Sys.Extended.UI.LineChartType=function(){throw Error.invalidOperation()},Sys.Extended.UI.LineChartType.prototype={Basic:0,Stacked:1},Sys.Extended.UI.LineChartType.registerEnum("Sys.Extended.UI.LineChartType",!1);